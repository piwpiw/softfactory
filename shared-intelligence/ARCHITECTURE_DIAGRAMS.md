# ğŸ—ï¸ Architecture Optimization Diagrams

> **Purpose**: ```
> **Status**: ğŸŸ¢ ACTIVE (ê´€ë¦¬ ì¤‘)
> **Impact**: [Engineering / Operations]

---

## âš¡ Executive Summary (í•µì‹¬ ìš”ì•½)
- **ì£¼ìš” ë‚´ìš©**: ë³¸ ë¬¸ì„œëŠ” Architecture Optimization Diagrams ê´€ë ¨ í•µì‹¬ ëª…ì„¸ ë° ê´€ë¦¬ í¬ì¸íŠ¸ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
- **ìƒíƒœ**: í˜„ì¬ ìµœì‹ í™” ì™„ë£Œ ë° ê²€í†  ë¨.
- **ì—°ê´€ ë¬¸ì„œ**: [Master Index](./NOTION_MASTER_INDEX.md)

---

> Visual representations of current and target architectures for SoftFactory platform
> **Generated:** 2026-02-25

---

## Diagram 1: Current Architecture (Single Monolith)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CURRENT STATE                                â”‚
â”‚                     Single Instance Deployment                          â”‚
â”‚                        Capacity: ~1,000 users                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CLIENTS                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Web App    â”‚  â”‚  Mobile App  â”‚  â”‚  API Client  â”‚  â”‚  Telegram    â”‚  â”‚
â”‚  â”‚  (75 HTML)  â”‚  â”‚  (iOS/Web)   â”‚  â”‚  (3rd party) â”‚  â”‚  Bot (M-005) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                  â”‚                  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                       â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚     MONOLITHIC FLASK APPLICATION         â”‚ â”‚ HTTP/WebSocket
   â”‚          Port 8000                       â”‚ â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
   â”‚  â”‚    AUTHENTICATION LAYER (JWT)      â”‚ â”‚ â”‚
   â”‚  â”‚  - User login/signup               â”‚ â”‚ â”‚
   â”‚  â”‚  - Demo mode token support         â”‚ â”‚ â”‚
   â”‚  â”‚  - Password hashing (Werkzeug)     â”‚ â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
   â”‚  â”‚    6 SERVICE BLUEPRINTS             â”‚ â”‚ â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚ 1. CooCook (Chef Bookings)   â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Chef listings           â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Booking management      â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Review system           â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    Routes: 20 endpoints      â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚ 2. SNS Auto (Social Posting) â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - SNS account management  â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Post scheduling         â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Platform integration    â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    Routes: 12 endpoints      â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚ 3. Review Campaigns          â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Campaign creation       â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Influencer matching     â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Reward management       â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    Routes: 8 endpoints       â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚ 4. AI Automation             â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Scenario templates      â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - AI employee management  â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Usage tracking          â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    Routes: 10 endpoints      â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚ 5. WebApp Builder            â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Bootcamp enrollment     â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Progress tracking       â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Project deployment      â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    Routes: 8 endpoints       â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚ 6. Experience (Crawler)      â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Listings aggregation    â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Platform crawling       â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    - Scheduled scraping      â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â”‚    Routes: 6 endpoints       â”‚  â”‚ â”‚ â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
   â”‚  â”‚  Plus: Payment processing, Platform mgmt â”‚ â”‚
   â”‚  â”‚        Health checks, Static file serving â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
   â”‚                                        â”‚ â”‚
   â”‚  Gunicorn Workers: 4 (sync)            â”‚ â”‚
   â”‚  Request timeout: 30s                  â”‚ â”‚
   â”‚  Memory per worker: ~150MB             â”‚ â”‚
   â”‚  Max concurrent: ~100                  â”‚ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â”‚                         â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                          â”‚
   â”‚  SINGLE SHARED DATABASE (PostgreSQL)    â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚  â”‚  12 SQLAlchemy Models              â”‚ â”‚
   â”‚  â”‚  - Users (email, password_hash)    â”‚ â”‚
   â”‚  â”‚  - Chefs, Bookings, Reviews        â”‚ â”‚
   â”‚  â”‚  - SNS Accounts, Posts             â”‚ â”‚
   â”‚  â”‚  - Campaigns, Applications         â”‚ â”‚
   â”‚  â”‚  - AI Employees, Scenarios        â”‚ â”‚
   â”‚  â”‚  - Bootcamps, WebApps             â”‚ â”‚
   â”‚  â”‚  - Listings, CrawlerLogs          â”‚ â”‚
   â”‚  â”‚                                    â”‚ â”‚
   â”‚  â”‚  Connections: 20 max               â”‚ â”‚
   â”‚  â”‚  Size (current): 92KB (dev)       â”‚ â”‚
   â”‚  â”‚  Size (projected): 50GB (at scale) â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â”‚                                          â”‚
   â”‚  PostgreSQL 15-alpine (Single Instance)  â”‚
   â”‚  - No replicas                          â”‚
   â”‚  - No read scaling                      â”‚
   â”‚  - Single point of failure              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


BOTTLENECKS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Worker Pool:      4 workers Ã— 25 req/worker = 100 concurrent users max
2. DB Connection:    20 connections exhausted at ~200 concurrent users
3. No Caching:       100% of reads hit database
4. No Async:         Synchronous blocking (SNS posts block user requests)
5. Single Instance:  No redundancy, downtime = platform down
6. Static Serving:   Flask wastes CPU on HTML/CSS/JS serving
```

---

## Diagram 2: Phase 1 Architecture (Database Optimization + Caching)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PHASE 1 STATE                                   â”‚
â”‚              Database Optimization + Redis Caching                      â”‚
â”‚                   Capacity: ~10,000 users                              â”‚
â”‚                   Duration: 2 weeks                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                             CLIENTS
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                             â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚     MONOLITHIC FLASK APPLICATION               â”‚ â”‚
   â”‚          Port 8000                             â”‚ â”‚
   â”‚                                                â”‚ â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
   â”‚  â”‚    6 SERVICE BLUEPRINTS (unchanged)      â”‚ â”‚ â”‚
   â”‚  â”‚    - Same 60+ endpoints                  â”‚ â”‚ â”‚
   â”‚  â”‚    - Same business logic                 â”‚ â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
   â”‚                                                â”‚ â”‚
   â”‚  Gunicorn Workers: 9 (sync)  â† INCREASED     â”‚ â”‚
   â”‚  Worker timeout: 30s                          â”‚ â”‚
   â”‚  Memory per worker: ~150MB                    â”‚ â”‚
   â”‚  Connection pool: 30 (base) + 10 (overflow)  â”‚ â”‚
   â”‚  Max concurrent: ~500                        â”‚ â”‚
   â”‚                                                â”‚ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚            â”‚              â”‚              â”‚ Cache Calls
        â”‚            â”‚              â”‚    (50-70%)   â”‚ (5ms response)
        â”‚            â”‚              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚              â”‚    â”‚                   â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚         REDIS CACHE LAYER (NEW)                  â”‚  â”‚
   â”‚  â”‚  - In-memory data store                          â”‚  â”‚
   â”‚  â”‚  - Distributed across all workers               â”‚  â”‚
   â”‚  â”‚  - TTL-based expiration                         â”‚  â”‚
   â”‚  â”‚                                                  â”‚  â”‚
   â”‚  â”‚  CACHE STRATEGY:                                â”‚  â”‚
   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
   â”‚  â”‚  â”‚ Chef listings (TTL: 300s)  â†’ 60% hit rate â”‚ â”‚  â”‚
   â”‚  â”‚  â”‚ Active campaigns (TTL: 600s) â†’ 50% hit     â”‚ â”‚  â”‚
   â”‚  â”‚  â”‚ User profiles (TTL: 3600s) â†’ 70% hit       â”‚ â”‚  â”‚
   â”‚  â”‚  â”‚ SNS post queue (TTL: 60s) â†’ 40% hit        â”‚ â”‚  â”‚
   â”‚  â”‚  â”‚ API responses (TTL: 300s) â†’ 80% hit        â”‚ â”‚  â”‚
   â”‚  â”‚  â”‚ Overall cache hit rate: >50%               â”‚ â”‚  â”‚
   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
   â”‚  â”‚                                                  â”‚  â”‚
   â”‚  â”‚  Memory: 512MB - 2GB                           â”‚  â”‚
   â”‚  â”‚  Persistence: AOF enabled                      â”‚  â”‚
   â”‚  â”‚  Replication: Single node (Phase 2: cluster)   â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚             â”‚                                          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Query Cache                  â”‚ (30% of queries)
        â”‚ (50-70% of queries hit Redis)â”‚
        â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  OPTIMIZED POSTGRESQL DATABASE                         â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚  â”‚  NEW INDEXES ADDED (20-30% faster queries)      â”‚ â”‚
   â”‚  â”‚  - idx_chef_active_cuisine                      â”‚ â”‚
   â”‚  â”‚  - idx_booking_user_date                        â”‚ â”‚
   â”‚  â”‚  - idx_campaign_status                          â”‚ â”‚
   â”‚  â”‚  - idx_sns_post_status                          â”‚ â”‚
   â”‚  â”‚  - idx_campaign_app_status                      â”‚ â”‚
   â”‚  â”‚  ... and 8 more compound indexes                â”‚ â”‚
   â”‚  â”‚                                                  â”‚ â”‚
   â”‚  â”‚  Connection Pool:                                â”‚ â”‚
   â”‚  â”‚  - pool_size: 20 (per worker)                   â”‚ â”‚
   â”‚  â”‚  - max_overflow: 10                             â”‚ â”‚
   â”‚  â”‚  - pool_recycle: 3600s                          â”‚ â”‚
   â”‚  â”‚  - pool_pre_ping: enabled                       â”‚ â”‚
   â”‚  â”‚  - Total: 20 * 9 workers = 180 connections     â”‚ â”‚
   â”‚  â”‚                                                  â”‚ â”‚
   â”‚  â”‚  Performance:                                   â”‚ â”‚
   â”‚  â”‚  - Query time (p99): 50ms â† down from 100ms    â”‚ â”‚
   â”‚  â”‚  - Connection latency: <1ms (pooled)           â”‚ â”‚
   â”‚  â”‚  - Throughput: 50-100 RPS                      â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â”‚                                                        â”‚
   â”‚  PostgreSQL 15-alpine (Single Instance)               â”‚
   â”‚  - db.t3.medium (AWS)                                â”‚
   â”‚  - Still single node (replicas in Phase 2)           â”‚
   â”‚  - 50GB storage capacity                             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


IMPROVEMENTS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ Concurrent users:  100 â†’ 500 (5x increase)
âœ“ Cache hit ratio:   0% â†’ 50-70%
âœ“ Query latency:     100ms â†’ 50ms (p99)
âœ“ Database QPS:      50 â†’ 150 (3x with cache)
âœ“ Worker pool:       4 â†’ 9 workers
âœ“ Connection pool:   20 â†’ 180 connections

NEW BOTTLENECKS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš  Single DB instance still a bottleneck at 5,000+ users
âš  Synchronous requests still block during slow operations
âš  No read replicas for load distribution
âš  Static file serving still wastes Flask CPU
âš  No message queue for async jobs
```

---

## Diagram 3: Phase 2 Architecture (Replication + Async)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PHASE 2 STATE                                   â”‚
â”‚          Database Replication + Async Processing + Read Scaling        â”‚
â”‚                   Capacity: ~50,000 users                              â”‚
â”‚                   Duration: 4 weeks                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                             CLIENTS
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                             â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚     MONOLITHIC FLASK APPLICATION               â”‚ â”‚
   â”‚          Port 8000                             â”‚ â”‚
   â”‚                                                â”‚ â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
   â”‚  â”‚    6 SERVICE BLUEPRINTS                  â”‚ â”‚ â”‚
   â”‚  â”‚    - Async job decorators added         â”‚ â”‚ â”‚
   â”‚  â”‚    - Service-to-service calls supported â”‚ â”‚ â”‚
   â”‚  â”‚    - Same endpoints                     â”‚ â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
   â”‚                                                â”‚ â”‚
   â”‚  Gunicorn Workers: 9 (sync â†’ gevent)          â”‚ â”‚
   â”‚  Max concurrent: ~2,000                       â”‚ â”‚
   â”‚                                                â”‚ â”‚
   â”‚  NEW: Async Job Support                       â”‚ â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
   â”‚  â”‚ CELERY INTEGRATION (NEW)                 â”‚ â”‚ â”‚
   â”‚  â”‚ - post_to_sns.delay()  (SNS posting)    â”‚ â”‚ â”‚
   â”‚  â”‚ - send_email.delay()   (Email)          â”‚ â”‚ â”‚
   â”‚  â”‚ - process_review.delay() (Campaign)     â”‚ â”‚ â”‚
   â”‚  â”‚ - crawl_experience.delay() (Listings)   â”‚ â”‚ â”‚
   â”‚  â”‚                                         â”‚ â”‚ â”‚
   â”‚  â”‚ Returns 202 Accepted (non-blocking)     â”‚ â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
   â”‚                                                â”‚ â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚            â”‚              â”‚              â”‚
        â”‚            â”‚              â”‚    Async jobs (202 responses)
        â”‚            â”‚              â”‚              â”‚
        â”‚            â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚    â”‚                                     â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
        â”‚ â”‚                            â”‚                       â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚         REDIS CACHE LAYER (expanded)              â”‚  â”‚
   â”‚  â”‚ - Cache: 1GB (same as Phase 1)                    â”‚  â”‚
   â”‚  â”‚ - Sessions: 512MB                                 â”‚  â”‚
   â”‚  â”‚ - Queue: 2GB (Celery job queue)                   â”‚  â”‚
   â”‚  â”‚ - Pub/sub: Real-time updates                      â”‚  â”‚
   â”‚  â”‚ - Cache hit rate: 80% (up from 50%)               â”‚  â”‚
   â”‚  â”‚                                                   â”‚  â”‚
   â”‚  â”‚ Redis Configuration:                              â”‚  â”‚
   â”‚  â”‚ - Master: primary instance (write)                â”‚  â”‚
   â”‚  â”‚ - Replica: for queue distribution                 â”‚  â”‚
   â”‚  â”‚ - Persistence: RDB + AOF                          â”‚  â”‚
   â”‚  â”‚ - Memory policy: allkeys-lru                      â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                                                         â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚    CELERY TASK QUEUE (NEW)                       â”‚  â”‚
   â”‚  â”‚    - Message Broker: Redis                       â”‚  â”‚
   â”‚  â”‚    - Workers: 4 dedicated Celery workers         â”‚  â”‚
   â”‚  â”‚    - Tasks: SNS posts, emails, crawling          â”‚  â”‚
   â”‚  â”‚    - Concurrency: 16 jobs per worker             â”‚  â”‚
   â”‚  â”‚    - Max parallel jobs: 64                        â”‚  â”‚
   â”‚  â”‚    - Job timeout: 5 minutes                       â”‚  â”‚
   â”‚  â”‚    - Retry policy: exponential backoff            â”‚  â”‚
   â”‚  â”‚                                                   â”‚  â”‚
   â”‚  â”‚    TASK TYPES:                                   â”‚  â”‚
   â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
   â”‚  â”‚    â”‚ 1. SNS Posts (async)                   â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Instagram post scheduling         â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - TikTok upload                     â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Blog publishing                   â”‚    â”‚  â”‚
   â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
   â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
   â”‚  â”‚    â”‚ 2. Email Notifications                 â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Welcome emails                    â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Booking confirmations             â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Campaign notifications            â”‚    â”‚  â”‚
   â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
   â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
   â”‚  â”‚    â”‚ 3. Background Processing                â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Campaign aggregation               â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Review ranking                     â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Data cleanup                       â”‚    â”‚  â”‚
   â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
   â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
   â”‚  â”‚    â”‚ 4. Web Crawling (Experience)            â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Platform scraping                 â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Listing aggregation               â”‚    â”‚  â”‚
   â”‚  â”‚    â”‚    - Rate limiting respected           â”‚    â”‚  â”‚
   â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
   â”‚  â”‚                                                   â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                                  â”‚                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚        â”‚                     â”‚         â”‚
                  â”‚        â”‚                     â”‚         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”   â”‚
        â”‚            â”‚ â”‚                  â”‚ â”‚         â”‚   â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚  DATABASE LAYER (Read Replicas Added)
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”‚  MASTER (Write)                                 â”‚
   â”‚  â”‚  - Accepts all INSERT/UPDATE/DELETE            â”‚
   â”‚  â”‚  - db.t3.large (AWS)                           â”‚
   â”‚  â”‚  - Synchronous replication to replicas         â”‚
   â”‚  â”‚  - Automated backup: daily                      â”‚
   â”‚  â”‚                                                 â”‚
   â”‚  â”‚  Performance:                                   â”‚
   â”‚  â”‚  - Write latency: <10ms                         â”‚
   â”‚  â”‚  - Write throughput: 1,000 QPS                  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                    â”‚ (replication)
   â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚        â”‚                       â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  â”‚ REPLICA 1      â”‚     â”‚ REPLICA 2      â”‚
   â”‚  â”‚ (Read-only)    â”‚     â”‚ (Read-only)    â”‚
   â”‚  â”‚ db.t3.large    â”‚     â”‚ db.t3.large    â”‚
   â”‚  â”‚                â”‚     â”‚                â”‚
   â”‚  â”‚ Read latency:  â”‚     â”‚ Read latency:  â”‚
   â”‚  â”‚ <5ms           â”‚     â”‚ <5ms           â”‚
   â”‚  â”‚                â”‚     â”‚                â”‚
   â”‚  â”‚ Lag: <1 sec    â”‚     â”‚ Lag: <1 sec    â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â”‚  Read/Write Routing:
   â”‚  - Writes â†’ Master (serialized)
   â”‚  - Reads â†’ Master (current data) or Replica (eventual consistency)
   â”‚  - Chef listings â†’ Replica (eventually consistent OK)
   â”‚  - User bookings â†’ Master (strong consistency required)
   â”‚  - Campaigns â†’ Replica (read-heavy)
   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


IMPROVEMENTS vs Phase 1:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ Concurrent users:     500 â†’ 2,000 (4x increase)
âœ“ Request latency:      <500ms â†’ <200ms (p99)
âœ“ Async tasks:          60% of requests (non-blocking)
âœ“ Cache hit rate:       50% â†’ 80%
âœ“ Database read load:   3x distribution (3 instances)
âœ“ Write throughput:     unchanged (1 master bottleneck)
âœ“ Session persistence:  Redis (survives restarts)
âœ“ Job processing:       64 parallel tasks

REMAINING BOTTLENECKS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš  Single write master: 1,000 QPS limit
âš  Monolithic app structure: services compete for resources
âš  All services share same database: schema changes risky
âš  Static file serving: still in Flask
âš  Single API endpoint: no service isolation
```

---

## Diagram 4: Phase 3 Architecture (Microservices)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PHASE 3 STATE                                   â”‚
â”‚                    Microservices Architecture                          â”‚
â”‚                  Capacity: 100,000+ concurrent users                   â”‚
â”‚                     Duration: 8 weeks                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


                              CLIENTS
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                            â”‚
        â”œâ”€â”€â”€ Web Browser          Mobile App        API Client
        â”‚      (React)              (iOS)          (3rd party)
        â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚          API GATEWAY (Kong)                       â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚ Authentication Layer                        â”‚  â”‚
   â”‚  â”‚ - JWT verification                         â”‚  â”‚
   â”‚  â”‚ - Rate limiting (per user)                 â”‚  â”‚
   â”‚  â”‚ - Request routing                          â”‚  â”‚
   â”‚  â”‚ - Response compression                     â”‚  â”‚
   â”‚  â”‚ - CORS handling                            â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â”‚                                                  â”‚
   â”‚  Routes:                                        â”‚
   â”‚  /api/coocook/*        â†’ CooCook Service        â”‚
   â”‚  /api/sns-auto/*       â†’ SNS Auto Service       â”‚
   â”‚  /api/review/*         â†’ Review Service         â”‚
   â”‚  /api/auth/*           â†’ Auth Service (Platform)â”‚
   â”‚  /api/payment/*        â†’ Payment Service        â”‚
   â”‚  /api/experience/*     â†’ Experience Service     â”‚
   â”‚                                                  â”‚
   â”‚  Features:                                      â”‚
   â”‚  - Automatic load balancing                    â”‚
   â”‚  - Circuit breaker on downstream services      â”‚
   â”‚  - Request logging + tracing                   â”‚
   â”‚  - Service mesh integration (optional)         â”‚
   â”‚                                                  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚        â”‚        â”‚        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                  â”‚        â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
        â”‚ â”‚                         â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                 â”‚    â”‚                    â”‚
   â”‚  SERVICE 1      â”‚    â”‚   SERVICE 2        â”‚
   â”‚  Platform &     â”‚    â”‚   CooCook          â”‚
   â”‚  Payment        â”‚    â”‚   (Chef Bookings)  â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚  â”‚ Auth       â”‚ â”‚    â”‚ â”‚ Routes:        â”‚ â”‚
   â”‚  â”‚ Payment    â”‚ â”‚    â”‚ â”‚ - List chefs   â”‚ â”‚
   â”‚  â”‚ User mgmt  â”‚ â”‚    â”‚ â”‚ - Book chef    â”‚ â”‚
   â”‚  â”‚ Products   â”‚ â”‚    â”‚ â”‚ - Review       â”‚ â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â”‚        â”‚        â”‚    â”‚          â”‚         â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ FastAPI  â”‚         â”‚
   â”‚ â”‚                    â”‚ Uvicorn  â”‚         â”‚
   â”‚ â”‚ Flask + Gunicorn   â”‚ Workers: 4â”‚        â”‚
   â”‚ â”‚ Workers: 4         â”‚          â”‚         â”‚
   â”‚ â”‚                    â”‚ Max concurrent:    â”‚
   â”‚ â”‚                    â”‚ 10,000 (per        â”‚
   â”‚ â”‚                    â”‚ service)           â”‚
   â”‚ â”‚                    â”‚          â”‚         â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â” â”‚
   â”‚        â”‚             â””â”€â”¤ Database       â”‚ â”‚
   â”‚        â”‚               â”‚ (Dedicated)    â”‚ â”‚
   â”‚        â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   â”‚        â”‚                                  â”‚
   â”‚    PostgreSQL         PostgreSQL          â”‚
   â”‚    (Master + 2 read   (Master + 2 read    â”‚
   â”‚     replicas)         replicas)           â”‚
   â”‚                                           â”‚
   â”‚ Data: Users,          Data: Chefs,        â”‚
   â”‚ Products,             Bookings,           â”‚
   â”‚ Subscriptions,        Reviews,            â”‚
   â”‚ Payments              Ratings             â”‚
   â”‚                                           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                          â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                  â”‚    â”‚                     â”‚  â”‚                  â”‚
   â”‚   SERVICE 3      â”‚    â”‚    SERVICE 4        â”‚  â”‚   SERVICE 5      â”‚
   â”‚   SNS Auto       â”‚    â”‚    Review Campaigns â”‚  â”‚   AI Automation  â”‚
   â”‚   (Social Posts) â”‚    â”‚    (Influencer Mgmt)â”‚  â”‚   (Agents)       â”‚
   â”‚                  â”‚    â”‚                     â”‚  â”‚                  â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   â”‚ â”‚ SNS posting  â”‚ â”‚    â”‚ â”‚ Campaign mgmt    â”‚  â”‚ â”‚ Scenario mgmt  â”‚â”‚
   â”‚ â”‚ Account mgmt â”‚ â”‚    â”‚ â”‚ Influencer match â”‚  â”‚ â”‚ AI employee    â”‚â”‚
   â”‚ â”‚ Scheduling   â”‚ â”‚    â”‚ â”‚ Review tracking  â”‚  â”‚ â”‚ Usage tracking â”‚â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   â”‚        â”‚         â”‚    â”‚          â”‚        â”‚  â”‚          â”‚       â”‚
   â”‚ FastAPIâ”‚         â”‚    â”‚ FastAPI  â”‚        â”‚  â”‚ FastAPI  â”‚       â”‚
   â”‚ + Celery          â”‚    â”‚ + Elasticsearch   â”‚  â”‚ + Redis  â”‚       â”‚
   â”‚        â”‚         â”‚    â”‚          â”‚        â”‚  â”‚          â”‚       â”‚
   â”‚ Async  â”‚         â”‚    â”‚ Full-textâ”‚        â”‚  â”‚ Job queue        â”‚
   â”‚ jobs   â”‚         â”‚    â”‚ search   â”‚        â”‚  â”‚          â”‚       â”‚
   â”‚        â”‚         â”‚    â”‚          â”‚        â”‚  â”‚          â”‚       â”‚
   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”â”‚
   â”‚ â”‚ PostgreSQL    â”‚â”‚    â”‚ â”‚ PostgreSQL     â”‚  â”‚ â”‚ PostgreSQL     â”‚â”‚
   â”‚ â”‚ Master + 1    â”‚â”‚    â”‚ â”‚ Master + 1     â”‚  â”‚ â”‚ Master + 1     â”‚â”‚
   â”‚ â”‚ replica       â”‚â”‚    â”‚ â”‚ replica        â”‚  â”‚ â”‚ replica        â”‚â”‚
   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   â”‚                  â”‚    â”‚ + Elasticsearch â”œâ”€â”€â”¤                    â”‚
   â”‚ Data:            â”‚    â”‚ (search index)  â”‚  â”‚ Data:              â”‚
   â”‚ - SNS Accounts   â”‚    â”‚                 â”‚  â”‚ - AI Employees     â”‚
   â”‚ - Posts          â”‚    â”‚ Data:           â”‚  â”‚ - Scenarios        â”‚
   â”‚ - Scheduling     â”‚    â”‚ - Campaigns     â”‚  â”‚ - Usage stats      â”‚
   â”‚                  â”‚    â”‚ - Applications  â”‚  â”‚                    â”‚
   â”‚                  â”‚    â”‚ - Reviews       â”‚  â”‚                    â”‚
   â”‚                  â”‚    â”‚ - Influencers   â”‚  â”‚                    â”‚
   â”‚                  â”‚    â”‚                 â”‚  â”‚                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SHARED INFRASTRUCTURE LAYER:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              REDIS CLUSTER (Shared)                              â”‚ â”‚
â”‚  â”‚  - Cache: 4GB (distributed)                                     â”‚ â”‚
â”‚  â”‚  - Sessions: 2GB (all services)                                 â”‚ â”‚
â”‚  â”‚  - Pub/sub: Real-time events                                   â”‚ â”‚
â”‚  â”‚  - Cluster nodes: 6 (3 master + 3 slave)                       â”‚ â”‚
â”‚  â”‚  - Memory: 6GB total                                            â”‚ â”‚
â”‚  â”‚  - Cache hit rate: 85%                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              MESSAGE QUEUE (Celery + RabbitMQ)                   â”‚ â”‚
â”‚  â”‚  - Broker: RabbitMQ (reliability)                                â”‚ â”‚
â”‚  â”‚  - Result backend: Redis                                         â”‚ â”‚
â”‚  â”‚  - Queue throughput: 10,000 jobs/sec                            â”‚ â”‚
â”‚  â”‚  - Distributed workers across all services                      â”‚ â”‚
â”‚  â”‚  - Retry policy: exponential backoff                            â”‚ â”‚
â”‚  â”‚  - Dead letter queue for failed jobs                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚               CDN (CloudFront / Cloudflare)                      â”‚ â”‚
â”‚  â”‚  - Static assets: HTML, CSS, JS, images                         â”‚ â”‚
â”‚  â”‚  - Cache TTL: 1 hour to 1 day                                   â”‚ â”‚
â”‚  â”‚  - Edge locations: 200+ worldwide                               â”‚ â”‚
â”‚  â”‚  - DDoS protection: Built-in                                    â”‚ â”‚
â”‚  â”‚  - Compression: gzip, brotli                                    â”‚ â”‚
â”‚  â”‚  - Cache hit ratio: 95%+                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         MONITORING & OBSERVABILITY (Prometheus + Grafana)        â”‚ â”‚
â”‚  â”‚  - Metrics collection: Prometheus                               â”‚ â”‚
â”‚  â”‚  - Visualization: Grafana dashboards                            â”‚ â”‚
â”‚  â”‚  - Alerting: PagerDuty integration                              â”‚ â”‚
â”‚  â”‚  - Distributed tracing: Jaeger                                  â”‚ â”‚
â”‚  â”‚  - Log aggregation: ELK stack (optional)                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


IMPROVEMENTS vs Phase 2:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ Concurrent users:           2,000 â†’ 10,000+ per service
âœ“ Total capacity:             50,000 â†’ 100,000+
âœ“ Service independence:       Each scales separately
âœ“ Database scaling:           5 independent databases
âœ“ Write throughput:           1K QPS (single master) â†’ 5K QPS (multi-master)
âœ“ Deployment time:            Global â†’ 5 min per service
âœ“ Service update:             No downtime per service
âœ“ Resource utilization:       80% â†’ 95% (better scaling)
âœ“ Service-to-service latency: <50ms (API Gateway)

ARCHITECTURE BENEFITS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ Independent scaling: High-traffic service (CooCook) scales without others
âœ“ Tech stack flexibility: Each service can use best tech for its domain
âœ“ Faster iteration: Services deploy independently
âœ“ Clear ownership: Each team owns specific services
âœ“ Failure isolation: CooCook outage doesn't affect SNS Auto
âœ“ Reusability: Services can be consumed by other products
âœ“ Future-proof: Can add new services without touching existing ones
```

---

## Diagram 5: Capacity Planning Timeline

```
                    CONCURRENT USERS OVER TIME
                         (Quarterly Growth)

                   PHASE 3 COMPLETE
                  100,000+ users achieved
                          â”‚
                          â”‚
                          â–²
                          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                          â”‚ â”‚  Microservices
                          â”‚ â”‚  (5 independent services)
                      50K â”‚ â”‚  â€¢ CooCook (20K concurrent)
                          â”‚ â”‚  â€¢ SNS Auto (15K concurrent)
                          â”‚ â”‚  â€¢ Review (12K concurrent)
                          â”‚ â”‚  â€¢ Platform (30K)
                          â”‚ â”‚  â€¢ Others (10K)
                          â”‚ â”‚
                          â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                          â”‚ â”‚  PHASE 2 COMPLETE
                          â”‚ â”‚  Database Replication + Async
                      10K â”‚ â”‚
                          â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                          â”‚ â”‚  â”‚  PHASE 1 COMPLETE
                          â”‚ â”‚  â”‚  Caching + Pooling
                       1K â”‚ â”‚  â”‚
                          â”‚ â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                          â”‚ â”‚  â”‚  â”‚  CURRENT STATE
                        100 â”‚  â”‚  â”‚  â”‚  Single monolith
                          â”‚  â”‚  â”‚  â”‚
                          â””â”€â–¼â”€â”€â–¼â”€â”€â–¼â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º TIME
                       Feb25  Mar15 May1 Aug15 Sep1
                       (NOW)  (P1) (P2) (P3) (GOAL)
                              |    |    |
                              2    4    8    weeks effort


SCALING ROADMAP:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Phase 1: Feb 25 - Mar 15 (2 weeks)
â”œâ”€ Add database indexes
â”œâ”€ Deploy Redis caching
â”œâ”€ Increase Gunicorn workers
â”œâ”€ Implement connection pooling
â”œâ”€ Load test: 1K â†’ 10K concurrent
â””â”€ Cost: $200/month

Phase 2: Mar 15 - May 1 (6 weeks)
â”œâ”€ Set up read replicas (2x)
â”œâ”€ Deploy Celery async queue
â”œâ”€ Migrate sessions to Redis
â”œâ”€ Implement read/write routing
â”œâ”€ Full-text search (optional)
â”œâ”€ Load test: 10K â†’ 50K concurrent
â””â”€ Cost: $500/month

Phase 3: May 1 - Aug 15 (16 weeks)
â”œâ”€ Design microservices architecture
â”œâ”€ Extract CooCook service (FastAPI)
â”œâ”€ Set up API Gateway (Kong)
â”œâ”€ Implement service discovery
â”œâ”€ Extract SNS Auto service
â”œâ”€ Extract Review service
â”œâ”€ Full E2E testing
â”œâ”€ Load test: 50K â†’ 100K+ concurrent
â””â”€ Cost: $1,500/month
```

---

## Diagram 6: Request Flow Comparison

```
PHASE 1: SYNCHRONOUS REQUEST (with caching)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

User Request:
â””â”€ GET /api/coocook/chefs?page=1
   â””â”€ Flask receive_request
      â”œâ”€ Check Redis cache
      â”‚  â”œâ”€ HIT (50% probability) â†’ Return cached JSON [5ms]
      â”‚  â””â”€ MISS (50% probability)
      â”‚     â”œâ”€ Query DB for chefs
      â”‚     â”‚  â”œâ”€ Check connection pool (instant)
      â”‚     â”‚  â”œâ”€ Execute SQL query [40ms]
      â”‚     â”‚  â””â”€ Deserialize 20 chef objects [5ms]
      â”‚     â”œâ”€ Cache result in Redis [2ms]
      â”‚     â””â”€ Return JSON [2ms]
      â”‚        Total: ~50ms
      â””â”€ Send HTTP response (200 OK) [1ms]

Total response time: 5-50ms
Concurrent users: ~100
Request capacity: 1000 RPS


PHASE 2: MIXED SYNC + ASYNC (with replication + queue)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Synchronous Request:
â””â”€ GET /api/coocook/chefs
   â””â”€ Check Redis cache (3ms)
      â”œâ”€ HIT â†’ Return [5ms]
      â””â”€ MISS â†’ Query read replica [10ms]
         Total: 15-20ms response

Async Request:
â””â”€ POST /api/sns-auto/schedule
   â”œâ”€ Validate user (JWT) [1ms]
   â”œâ”€ Create SNSPost record (master DB) [5ms]
   â”œâ”€ Queue Celery job: post_to_sns.delay() [2ms]
   â”œâ”€ Return 202 Accepted [1ms]
   â”‚  Total user-facing latency: ~9ms âœ“
   â”‚
   â””â”€ [Asynchronously, in background]
      â”œâ”€ Celery worker picks up task
      â”œâ”€ Authenticate with SNS API
      â”œâ”€ Post content [500ms - 2s]
      â”œâ”€ Update SNSPost status = 'published'
      â””â”€ Send webhook notification (optional)

Total response time: 5-20ms (user sees immediately)
Background processing: 500ms - 2s (non-blocking)
Concurrent users: ~2,000
Async job throughput: 1,000 jobs/sec


PHASE 3: SERVICE ISOLATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

User Request:
â””â”€ GET /api/coocook/chefs
   â”œâ”€ API Gateway (Kong) [1ms]
   â”‚  â”œâ”€ Verify JWT token
   â”‚  â”œâ”€ Check rate limit
   â”‚  â”œâ”€ Route to CooCook service
   â”‚  â””â”€ Add tracing headers
   â”‚
   â””â”€ CooCook Service [5-20ms]
      â”œâ”€ FastAPI receive
      â”œâ”€ Check Redis cache [2ms]
      â”‚  â”œâ”€ HIT â†’ Return [3ms]
      â”‚  â””â”€ MISS
      â”‚     â”œâ”€ Query dedicated PostgreSQL replica [8ms]
      â”‚     â”œâ”€ Cache result [1ms]
      â”‚     â””â”€ Return [1ms]
      â””â”€ FastAPI serialize response
         â””â”€ API Gateway return to client

Total response time: 5-30ms
Concurrent users (CooCook service alone): 10,000
Service isolation: CooCook outage doesn't affect Payment API
```

---

## Diagram 7: Database Connection Pool Growth

```
                CONNECTION POOL UTILIZATION OVER SCALING

Current (1 Gunicorn worker):
â”œâ”€ Pool size: 5 connections
â”œâ”€ Avg connections used: 2 (40%)
â”œâ”€ Peak connections used: 4 (80%)
â””â”€ Max concurrent requests: 5

Phase 1 (9 Gunicorn workers):
â”œâ”€ Pool size: 20 per worker Ã— 9 = 180 connections
â”œâ”€ Avg connections used: 72 (40%)
â”œâ”€ Peak connections used: 144 (80%)
â”œâ”€ Pool overflow: +10 per worker = 90 additional
â””â”€ Max concurrent requests: 270

Phase 2 (read replicas + async):
â”œâ”€ Master pool: 20 Ã— 9 = 180
â”œâ”€ Replica pool: 10 Ã— 9 = 90 (read-only queries)
â”œâ”€ Total connections: 270
â”œâ”€ Avg utilization: 108 (40%)
â”œâ”€ Peak utilization: 216 (80%)
â””â”€ Max concurrent requests: 500 (with async jobs)

Phase 3 (5 services, each with replicas):
â”œâ”€ Service 1 (Platform): 180 + 90 = 270
â”œâ”€ Service 2 (CooCook): 180 + 90 = 270
â”œâ”€ Service 3 (SNS Auto): 180 + 90 = 270
â”œâ”€ Service 4 (Review): 180 + 90 = 270
â”œâ”€ Service 5 (AI Auto): 180 + 90 = 270
â”œâ”€ Total across all: 1,350 connections
â”œâ”€ Avg utilization: 540 (40%)
â”œâ”€ Peak utilization: 1,080 (80%)
â””â”€ Database capacity: Easily accommodates (PostgreSQL supports 300+)
```

---

End of Diagrams