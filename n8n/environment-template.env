# =============================================================
# n8n Automation Environment Configuration
# =============================================================
# Copy this file to .env.n8n and fill in your credentials
#
# Command to load:
#   export $(cat .env.n8n | grep -v '^#' | xargs)
# =============================================================

# --- n8n Core Configuration ---
N8N_PORT=5678
N8N_PROTOCOL=http
N8N_HOST=localhost
N8N_EDITOR_PORT=5679
N8N_WEBHOOK_URL=http://localhost:5678/webhook
N8N_WEBHOOK_TEST_URL=http://localhost:5678/webhook-test

# --- Database Configuration ---
DB_TYPE=sqlite
DB_SQLITE_PATH=D:/Project/.n8n/database.sqlite
N8N_DB_SQLITE_PATH=D:/Project/.n8n/database.sqlite

# --- Redis Configuration (for queue) ---
QUEUE_BULL_PORT=6379
QUEUE_BULL_HOST=localhost
QUEUE_BULL_DB=0
QUEUE_BULL_PREFIX=n8n

# --- Security ---
N8N_JWT_SECRET=your_n8n_jwt_secret_key_here_change_this
N8N_USER_MANAGEMENT_JWT_SECRET=your_n8n_user_jwt_secret_here_change_this
N8N_ENCRYPTION_KEY=your_n8n_encryption_key_here_change_this

# --- Logging ---
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=file,console
N8N_LOG_FILE_LOCATION=D:/Project/logs/n8n

# --- Execution Settings ---
EXECUTIONS_TIMEOUT_MAX=36000
EXECUTIONS_TIMEOUT=3600
EXECUTIONS_MODE=queue
EXECUTIONS_SAVE_DATA_ON_ERROR=all
EXECUTIONS_SAVE_DATA_ON_SUCCESS=all

# --- Worker Configuration ---
WORKER_MODE=simple
WORKER_CONCURRENCY=5

# --- Public API ---
N8N_PUBLIC_API_ENABLED=true
N8N_PUBLIC_API_BASE_PATH=/api

# =============================================================
# INTEGRATION CREDENTIALS
# =============================================================

# --- Gmail Configuration ---
# Setup: https://developers.google.com/gmail/api/quickstart/nodejs
# Step 1: Create OAuth 2.0 credential in Google Cloud Console
# Step 2: Download JSON credentials
# Step 3: Fill client ID, secret, and refresh token
GMAIL_CLIENT_ID=your_google_client_id_here.apps.googleusercontent.com
GMAIL_CLIENT_SECRET=your_google_client_secret_here
GMAIL_REFRESH_TOKEN=your_gmail_refresh_token_here
GMAIL_ACCESS_TOKEN=your_gmail_access_token_here
GMAIL_SENDER_EMAIL=your_email@gmail.com

# --- Notion Configuration ---
# Setup: https://www.notion.so/my-integrations
# Step 1: Create new integration
# Step 2: Copy API token
# Step 3: Share your database with the integration
NOTION_API_KEY=ntn_your_notion_api_key_here
NOTION_DATABASE_ID=your_notion_database_id_here

# Example Notion Database Schema:
# - Title (title)
# - Date (date)
# - Report_Type (select: Morning Brief, Mid-Morning, Afternoon, Evening, Night)
# - Content (rich_text)
# - Services_Status (rich_text)
# - Metrics (rich_text)
# - Timestamp (created_time)

# --- Telegram Configuration ---
# Token from BotFather on Telegram
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here
TELEGRAM_ALLOWED_USERS=7910169750

# Example: Get your Chat ID
# 1. Message the bot
# 2. Visit: https://api.telegram.org/bot{TOKEN}/getUpdates
# 3. Find your chat_id in the response

# =============================================================
# OPTIONAL: ADVANCED MONITORING
# =============================================================

# --- Prometheus Metrics (if enabled) ---
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# --- Sentry Error Tracking (if enabled) ---
SENTRY_ENABLED=false
SENTRY_DSN=your_sentry_dsn_here

# --- Slack Notifications (if enabled) ---
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=your_slack_webhook_url_here

# =============================================================
# PROJECT-SPECIFIC VARIABLES
# =============================================================

# API Configuration
API_BASE_URL=http://localhost:8000
API_TIMEOUT=30

# SoftFactory Platform
PLATFORM_SECRET_KEY=softfactory-dev-secret-key-2026
PLATFORM_URL=http://localhost:8000

# Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-api03-your_api_key_here

# Environment
ENVIRONMENT=production
NODE_ENV=production
LOG_LEVEL=info

# =============================================================
# CREDENTIALS VALIDATION CHECKLIST
# =============================================================
# Before running n8n, ensure you have:
# [ ] Gmail OAuth 2.0 credentials configured
# [ ] Notion API key with database access
# [ ] Telegram Bot token and Chat ID
# [ ] N8N_JWT_SECRET set to a secure random string
# [ ] All paths point to correct locations
# [ ] Ports 5678, 5679 are available
# =============================================================
