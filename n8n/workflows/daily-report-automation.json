{
  "name": "SoftFactory Daily Report Automation",
  "description": "Automated daily reports to Gmail, Notion, and Telegram at 5AM, 10AM, 3PM, 5PM, 10PM (KST)",
  "version": "2.0",
  "active": true,
  "timezone": "Asia/Seoul",
  "nodes": [
    {
      "id": "1",
      "name": "Schedule - 5 AM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 50],
      "parameters": {
        "cronExpression": "0 5 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "2",
      "name": "Schedule - 10 AM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 150],
      "parameters": {
        "cronExpression": "0 10 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "3",
      "name": "Schedule - 3 PM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 250],
      "parameters": {
        "cronExpression": "0 15 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "4",
      "name": "Schedule - 5 PM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 350],
      "parameters": {
        "cronExpression": "0 17 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "5",
      "name": "Schedule - 10 PM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 450],
      "parameters": {
        "cronExpression": "0 22 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "6",
      "name": "Generate Report Data",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [300, 250],
      "parameters": {
        "jsCode": "const timestamp = new Date();\nconst hour = timestamp.getHours();\nlet reportType = 'scheduled';\nlet greeting = 'Hello!';\n\nif (hour === 5) {\n  reportType = 'morning_brief';\n  greeting = 'Good Morning!';\n} else if (hour === 10) {\n  reportType = 'mid_morning';\n  greeting = 'Good Morning!';\n} else if (hour === 15) {\n  reportType = 'afternoon';\n  greeting = 'Good Afternoon!';\n} else if (hour === 17) {\n  reportType = 'evening';\n  greeting = 'Good Evening!';\n} else if (hour === 22) {\n  reportType = 'night_summary';\n  greeting = 'Good Night!';\n}\n\nreturn {\n  timestamp: timestamp.toISOString(),\n  date: timestamp.toLocaleDateString('en-US', { year: 'numeric', month: '2-digit', day: '2-digit' }),\n  time: timestamp.toLocaleTimeString('en-US', { hour12: false }),\n  hour: hour,\n  reportType: reportType,\n  greeting: greeting,\n  status: 'OPERATIONAL'\n};"
      }
    },
    {
      "id": "7",
      "name": "Send Email (Gmail)",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2,
      "position": [500, 100],
      "parameters": {
        "resource": "message",
        "operation": "send",
        "to": "{{$env.GMAIL_SENDER_EMAIL}}",
        "subject": "{{$node[\"Generate Report Data\"].json.greeting}} - SoftFactory {{$node[\"Generate Report Data\"].json.reportType}} Report",
        "html": "<h2>{{$node[\"Generate Report Data\"].json.greeting}}</h2><p><strong>Report Type:</strong> {{$node[\"Generate Report Data\"].json.reportType}}</p><p><strong>Time:</strong> {{$node[\"Generate Report Data\"].json.time}} KST</p><p><strong>Status:</strong> {{$node[\"Generate Report Data\"].json.status}}</p><p>This is an automated daily report from SoftFactory Platform.</p>"
      }
    },
    {
      "id": "8",
      "name": "Save to Notion",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [500, 250],
      "parameters": {
        "resource": "page",
        "operation": "create",
        "databaseId": "{{$env.NOTION_DATABASE_ID}}",
        "simple": false,
        "propertyKeyValuePairs": {
          "pairs": [
            {
              "key": "Title",
              "value": "{{$node[\"Generate Report Data\"].json.greeting}} - {{$node[\"Generate Report Data\"].json.date}}"
            },
            {
              "key": "Date",
              "value": "{{$node[\"Generate Report Data\"].json.date}}"
            },
            {
              "key": "Report_Type",
              "value": "{{$node[\"Generate Report Data\"].json.reportType}}"
            },
            {
              "key": "Time",
              "value": "{{$node[\"Generate Report Data\"].json.time}}"
            },
            {
              "key": "Status",
              "value": "{{$node[\"Generate Report Data\"].json.status}}"
            }
          ]
        }
      }
    },
    {
      "id": "9",
      "name": "Send to Telegram",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [500, 400],
      "parameters": {
        "chatId": "{{$env.TELEGRAM_CHAT_ID}}",
        "text": "{{$node[\"Generate Report Data\"].json.greeting}}\n\n*SoftFactory Daily Report*\nReport: {{$node[\"Generate Report Data\"].json.reportType}}\nTime: {{$node[\"Generate Report Data\"].json.time}} KST\nStatus: {{$node[\"Generate Report Data\"].json.status}}"
      }
    },
    {
      "id": "10",
      "name": "Log Execution",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [700, 250],
      "parameters": {
        "jsCode": "return {\n  executionTime: new Date().toISOString(),\n  workflow: 'Daily Report Automation',\n  reportType: $node[\"Generate Report Data\"].json.reportType,\n  gmailSent: !!$node[\"Send Email (Gmail)\"].json,\n  notionSaved: !!$node[\"Save to Notion\"].json,\n  telegramSent: !!$node[\"Send to Telegram\"].json,\n  status: 'success'\n};"
      }
    }
  ],
  "connections": {
    "1": { "main": [[{ "node": "6", "branch": 0 }]] },
    "2": { "main": [[{ "node": "6", "branch": 0 }]] },
    "3": { "main": [[{ "node": "6", "branch": 0 }]] },
    "4": { "main": [[{ "node": "6", "branch": 0 }]] },
    "5": { "main": [[{ "node": "6", "branch": 0 }]] },
    "6": { "main": [[{ "node": "7", "branch": 0 }, { "node": "8", "branch": 0 }, { "node": "9", "branch": 0 }]] },
    "7": { "main": [[{ "node": "10", "branch": 0 }]] },
    "8": { "main": [[{ "node": "10", "branch": 0 }]] },
    "9": { "main": [[{ "node": "10", "branch": 0 }]] }
  },
  "settings": {
    "executionOrder": "v1",
    "errorHandler": {
      "enabled": true
    }
  },
  "staticData": null,
  "pinData": null
}
