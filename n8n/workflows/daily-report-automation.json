{
  "name": "SoftFactory Daily Report Automation",
  "description": "Automated daily reports to email, Notion, and Telegram at 5AM, 10AM, 3PM, 5PM, 10PM",
  "version": "1.0",
  "active": true,
  "timezone": "Asia/Seoul",
  "nodes": [
    {
      "id": "1",
      "name": "Schedule - 5 AM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 100],
      "parameters": {
        "cronExpression": "0 5 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "2",
      "name": "Schedule - 10 AM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 200],
      "parameters": {
        "cronExpression": "0 10 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "3",
      "name": "Schedule - 3 PM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 300],
      "parameters": {
        "cronExpression": "0 15 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "4",
      "name": "Schedule - 5 PM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 400],
      "parameters": {
        "cronExpression": "0 17 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "5",
      "name": "Schedule - 10 PM",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 500],
      "parameters": {
        "cronExpression": "0 22 * * *",
        "timezone": "Asia/Seoul"
      }
    },
    {
      "id": "6",
      "name": "Generate Report",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [300, 300],
      "parameters": {
        "command": "cd D:/Project && python scripts/generate_daily_report.py"
      }
    },
    {
      "id": "7",
      "name": "Send Email (Gmail)",
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2,
      "position": [500, 200],
      "parameters": {
        "resource": "message",
        "operation": "send",
        "to": "piwpiw99@gmail.com",
        "subject": "SoftFactory Daily Report - {{ now.toFormat('yyyy-MM-dd HH:mm') }}",
        "body": "{{ $node[\"Generate Report\"].json.report_content }}",
        "attachments": "{{ $node[\"Generate Report\"].json.report_pdf }}"
      }
    },
    {
      "id": "8",
      "name": "Save to Notion",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [500, 350],
      "parameters": {
        "resource": "page",
        "operation": "create",
        "databaseId": "{{ $env.NOTION_DATABASE_ID }}",
        "properties": {
          "Title": {
            "title": [
              {
                "text": {
                  "content": "Daily Report - {{ now.toFormat('yyyy-MM-dd HH:mm') }}"
                }
              }
            ]
          },
          "Date": {
            "date": {
              "start": "{{ now.toISO() }}"
            }
          },
          "Content": {
            "rich_text": [
              {
                "text": {
                  "content": "{{ $node[\"Generate Report\"].json.report_content }}"
                }
              }
            ]
          },
          "Status": {
            "select": {
              "name": "Completed"
            }
          }
        }
      }
    },
    {
      "id": "9",
      "name": "Send to Telegram",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [500, 500],
      "parameters": {
        "chatId": "7910169750",
        "text": "Daily Report\n{{ $node[\"Generate Report\"].json.report_summary }}\n\nFull report attached.",
        "attachments": [
          {
            "property": "report_pdf",
            "value": "{{ $node[\"Generate Report\"].json.report_pdf }}"
          }
        ]
      }
    },
    {
      "id": "10",
      "name": "Log Success",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [700, 300],
      "parameters": {
        "command": "echo '[OK] Daily report sent to email, Notion, and Telegram' >> D:/Project/logs/n8n-reports.log"
      }
    }
  ],
  "connections": {
    "1": { "main": [[{ "node": "6", "branch": 0 }]] },
    "2": { "main": [[{ "node": "6", "branch": 0 }]] },
    "3": { "main": [[{ "node": "6", "branch": 0 }]] },
    "4": { "main": [[{ "node": "6", "branch": 0 }]] },
    "5": { "main": [[{ "node": "6", "branch": 0 }]] },
    "6": { "main": [[{ "node": "7", "branch": 0 }, { "node": "8", "branch": 0 }, { "node": "9", "branch": 0 }]] },
    "7": { "main": [[{ "node": "10", "branch": 0 }]] },
    "8": { "main": [[{ "node": "10", "branch": 0 }]] },
    "9": { "main": [[{ "node": "10", "branch": 0 }]] }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "pinData": null
}
