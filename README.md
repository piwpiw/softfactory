# ?뱷 SoftFactory Platform

> **Purpose**: Fact Source: `docs/FACTS_SNAPSHOT_LATEST.json` (generated by `python scripts/generate_facts_snapshot.py`).
> **Status**: ?윟 ACTIVE (愿由?以?
> **Impact**: [Engineering / Operations]

---

## ??Executive Summary (?듭떖 ?붿빟)
- **二쇱슂 ?댁슜**: 蹂?臾몄꽌??SoftFactory Platform 愿???듭떖 紐낆꽭 諛?愿由??ъ씤?몃? ?ы븿?⑸땲??
- **?곹깭**: ?꾩옱 理쒖떊???꾨즺 諛?寃????
- **?곌? 臾몄꽌**: [Master Index](./NOTION_MASTER_INDEX.md)

---

Fact Source: `docs/FACTS_SNAPSHOT_LATEST.json` (generated by `python scripts/generate_facts_snapshot.py`).

Reality-checked baseline (updated: 2026-02-26).

## Overview

SoftFactory is a monolithic Flask platform that serves multiple product areas from one backend:

- Platform admin and account management
- SNS automation
- CooCook experience platform
- Review campaign services
- AI automation and webapp builder
- Payments, files, search, RBAC, video, notifications

## Verified Runtime Modes

Use one mode at a time.

### 1) API Dev Mode (port 8000)

```bash
python run.py
```

- Base URL: `http://127.0.0.1:8000`
- Health: `GET /health`

### 2) Integrated Demo Mode (port 9000)

```bash
python start_platform.py
```

- Web entry: `http://localhost:9000/web/platform/index.html`
- API base: `http://localhost:9000/api/`

### 3) Docker Local Stack (port 8000)

```bash
docker-compose up -d --build
```

- API: `http://localhost:8000`
- pgAdmin: `http://localhost:5050`
- Redis Commander: `http://localhost:8081`

### 4) Vercel Frontend

- Install frontend as a static Vercel site using `vercel.json`.
- API calls are routed to your backend via Vercel function `api/proxy.js`.
- Set `API_UPSTREAM_URL` (or `VERCEL_API_UPSTREAM_URL`) in Vercel Environment Variables.
- Example command:

```bash
npx vercel --prod --yes
```

## Key Backend Mounts

The app factory in `backend/app.py` registers major blueprints including:

- `/api/auth`
- `/api/payment`
- `/api/sns`
- `/api/files`
- `/api/search`
- `/api/admin` and `/api/admin/rbac`
- `/api/videos`
- `/api/platform`

## Docker Compose (Development Environment)

### Basic Execution

```bash
docker compose up
```

Services:
- **Flask API**: http://localhost:8000
- **PostgreSQL**: localhost:5432
- **Redis**: localhost:6379
- **Elasticsearch**: http://localhost:9200
- **pgAdmin**: http://localhost:5050
- **Redis Commander**: http://localhost:8081

### Optional Monitoring Stack

To run the monitoring stack separately:

```bash
docker compose -f docker-compose.monitoring.yml up
```

Services:
- **Prometheus**: http://localhost:9090
- **Grafana**: http://localhost:3000
- **Alertmanager**: http://localhost:9093

## Testing and CI

Primary CI workflow:

- `.github/workflows/ci.yml`

Primary deployment workflows:

- `.github/workflows/deploy-staging.yml`
- `.github/workflows/deploy-production.yml`

### Deployment Workflows

| File | Trigger | Purpose |
|------|---------|---------|
| `ci.yml` | Push to main/develop/feature/*, PR | Linting, testing, security checks |
| `deploy.yml` | Push tag (v*) | Simple deployment (legacy) |
| `deploy-production.yml` | Push to main, tag (v*), manual | Production deployment (canary + auto-rollback) |
| `deploy-staging.yml` | Push to develop, manual | Staging deployment |
| `security.yml` | Push, PR, weekly | CodeQL, Bandit, OWASP ZAP scanning |

**Important:** Set GitHub Secrets before deploying. See `.env.example` for details.

## Documentation Policy

Some historical markdown reports in this repository were generated from different sprint contexts and can disagree.

For current engineering truth, prioritize:

1. Runtime code in `backend/`, `web/`, `scripts/`
2. CI/CD workflows in `.github/workflows/`
3. `STATUS.md`, `PROJECT_STATUS_2026-02-26.md`, and `API_ENDPOINT_QUICK_REFERENCE.md`

## MCP Source of Truth

MCP usage is a project policy layer, not a Flask runtime dependency.

Use:

1. orchestrator/mcp-registry.md for classification and evidence (Used / Configured / Ready / Decision).
2. .mcp.json as the active core profile (fetch, filesystem, sqlite).
3. .mcp.core.json / .mcp.optional.json for minimal vs optional activation patterns.
4. .env key presence for operational readiness.

Core MCP: fetch, filesystem, sqlite
Optional MCP: claude, github, google-search, postgres, puppeteer

As of 2026-02-28, MCP is used for automation workflows and test tooling only.
