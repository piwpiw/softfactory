<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#111827">
    <title>í”¼ë“œ â€” CooCook â€” SoftFactory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="../platform/api.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .feed-card { transition: all 0.3s ease; }
        .feed-card:hover { box-shadow: 0 8px 16px rgba(0,0,0,0.3); }
        .modal-overlay { backdrop-filter: blur(4px); }
        .profile-card { position: sticky; top: 0; }
    </style>
    <link rel="stylesheet" href="../responsive-framework.css">
</head>
<body class="bg-slate-950 text-slate-100">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar Navigation -->
        <aside class="w-64 bg-slate-900 border-r border-slate-800 flex flex-col shrink-0 overflow-y-auto">
            <div class="p-6 border-b border-slate-800">
                <a href="index.html" class="flex items-center gap-3">
                    <span class="text-2xl">ğŸ³</span>
                    <div><h1 class="font-bold text-white text-sm">CooCook</h1><p class="text-xs text-slate-400">í”¼ë“œ</p></div>
                </a>
            </div>
            <nav class="flex-1 p-6 space-y-2">
                <a href="index.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800">ğŸ  í™ˆ</a>
                <a href="recipes.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800">ğŸ“– ë ˆì‹œí”¼</a>
                <a href="shopping-list.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800">ğŸ›’ ì‡¼í•‘ë¦¬ìŠ¤íŠ¸</a>
                <a href="feed.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg bg-orange-600 text-white font-medium">ğŸ“± í”¼ë“œ</a>
            </nav>

            <div class="p-6 border-t border-slate-800">
                <button onclick="logout()" class="p-2 hover:bg-slate-800 rounded-lg w-full text-left">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="h-16 bg-slate-900 border-b border-slate-800 px-6 flex items-center justify-between shrink-0">
                <div>
                    <h2 class="text-xl font-bold text-white">ğŸ“± í”¼ë“œ</h2>
                    <p class="text-xs text-slate-400">íŒ”ë¡œìš° ì¤‘ì¸ ìš”ë¦¬ì‚¬ì™€ í™œë™</p>
                </div>
            </header>

            <!-- Content Grid -->
            <main class="flex-1 overflow-y-auto p-6">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                    <!-- Left Sidebar: Profile Card -->
                    <div class="lg:col-span-1">
                        <div class="profile-card bg-slate-800 rounded-lg border border-slate-700 p-6 space-y-4">
                            <!-- User Profile -->
                            <div class="text-center pb-4 border-b border-slate-700">
                                <div class="text-4xl mb-2">ğŸ‘¨â€ğŸ³</div>
                                <h3 class="text-lg font-semibold text-white">ê¹€ì •í˜¸</h3>
                                <p class="text-sm text-orange-400">@kimjeonho</p>
                                <p class="text-xs text-slate-400 mt-2">ì„œìš¸ Â· 30ëŒ€ Â· ìš”ë¦¬ ì• í˜¸ê°€</p>
                            </div>

                            <!-- Stats -->
                            <div class="grid grid-cols-3 gap-3 text-center">
                                <div>
                                    <p class="text-xl font-bold text-white">24</p>
                                    <p class="text-xs text-slate-400">ìš”ë¦¬ íšŸìˆ˜</p>
                                </div>
                                <div>
                                    <p class="text-xl font-bold text-white">128</p>
                                    <p class="text-xs text-slate-400">íŒ”ë¡œì›Œ</p>
                                </div>
                                <div>
                                    <p class="text-xl font-bold text-white">45</p>
                                    <p class="text-xs text-slate-400">íŒ”ë¡œìš°</p>
                                </div>
                            </div>

                            <!-- Bio -->
                            <div class="text-sm text-slate-300">
                                <p>ğŸœ í•œì‹ì„ ì‚¬ë‘í•©ë‹ˆë‹¤</p>
                                <p>ğŸ“¸ ì‹ì‚¬ ê¸°ë¡ê´‘</p>
                                <p>ğŸŒŸ ì½”ë“œìš”ë¦¬ ì§€ì¶œê° ìƒí™œ</p>
                            </div>

                            <!-- Action Buttons -->
                            <div class="space-y-2 pt-4 border-t border-slate-700">
                                <button onclick="editProfile()" class="w-full px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium text-sm">âœï¸ í”„ë¡œí•„ ìˆ˜ì •</button>
                                <button onclick="viewFollowers()" class="w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium text-sm">ğŸ‘¥ íŒ”ë¡œì›Œ</button>
                            </div>
                        </div>
                    </div>

                    <!-- Center: Feed Stream -->
                    <div class="lg:col-span-2">
                        <div class="space-y-6" id="feedStream">
                            <!-- Loading skeleton -->
                            <div class="feed-card bg-slate-800 rounded-lg border border-slate-700 p-6 animate-pulse">
                                <div class="h-4 bg-slate-700 rounded w-1/2 mb-4"></div>
                                <div class="h-32 bg-slate-700 rounded mb-4"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Sidebar: Recommendations -->
                    <div class="lg:col-span-1">
                        <div class="bg-slate-800 rounded-lg border border-slate-700 p-6 space-y-4">
                            <h3 class="text-lg font-semibold text-white">ğŸ”¥ ì¶”ì²œ ìš”ë¦¬ì‚¬</h3>
                            <div id="recommendedChefs" class="space-y-3">
                                <!-- Will be populated -->
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Comment Modal -->
    <div id="commentModal" class="fixed inset-0 bg-black/50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-xl border border-slate-700 max-w-lg w-full">
            <div class="flex items-center justify-between p-6 border-b border-slate-700">
                <h3 class="text-xl font-bold text-white">ëŒ“ê¸€/ë¦¬ë·° ì‘ì„±</h3>
                <button onclick="closeCommentModal()" class="text-slate-400 hover:text-white text-xl">âœ•</button>
            </div>
            <div class="p-6 space-y-4">
                <div id="commentRecipeName" class="p-3 bg-slate-700 rounded text-sm font-semibold text-white">ë ˆì‹œí”¼ ì´ë¦„</div>

                <div>
                    <label class="block text-sm font-semibold text-white mb-2">â­ í‰ì </label>
                    <div class="flex gap-2">
                        <button onclick="setRating(1)" class="px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded">â­</button>
                        <button onclick="setRating(2)" class="px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded">â­â­</button>
                        <button onclick="setRating(3)" class="px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded">â­â­â­</button>
                        <button onclick="setRating(4)" class="px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded">â­â­â­â­</button>
                        <button onclick="setRating(5)" class="px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded">â­â­â­â­â­</button>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-semibold text-white mb-2">ğŸ’¬ ëŒ“ê¸€</label>
                    <textarea id="commentText" placeholder="ì´ ë ˆì‹œí”¼ì— ëŒ€í•´ ì˜ê²¬ì„ ê³µìœ í•˜ì„¸ìš”..." class="w-full h-32 px-4 py-2 bg-slate-700 text-white rounded-lg border border-slate-600 placeholder-slate-500 resize-none"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-semibold text-white mb-2">ğŸ“¸ ì‚¬ì§„ ì¶”ê°€</label>
                    <button onclick="addPhoto()" class="w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium text-sm">ğŸ“· ì‚¬ì§„ ì„ íƒ</button>
                </div>
            </div>

            <div class="p-6 border-t border-slate-700 flex gap-3">
                <button onclick="closeCommentModal()" class="flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium">ì·¨ì†Œ</button>
                <button onclick="submitComment()" class="flex-1 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg font-medium">ğŸ“¤ ì˜¬ë¦¬ê¸°</button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="fixed inset-0 bg-black/50 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-xl border border-slate-700 max-w-lg w-full">
            <div class="flex items-center justify-between p-6 border-b border-slate-700">
                <h3 class="text-xl font-bold text-white">ê³µìœ í•˜ê¸°</h3>
                <button onclick="closeShareModal()" class="text-slate-400 hover:text-white text-xl">âœ•</button>
            </div>
            <div class="p-6 space-y-3">
                <button class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium text-sm">ğŸ“˜ Facebook</button>
                <button class="w-full px-4 py-2 bg-sky-400 hover:bg-sky-500 text-white rounded-lg font-medium text-sm">ğŸ¦ Twitter</button>
                <button class="w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium text-sm">ğŸ“Œ Pinterest</button>
                <button onclick="copyShareLink()" class="w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium text-sm">ğŸ”— ë§í¬ ë³µì‚¬</button>
            </div>
            <div class="p-6 border-t border-slate-700">
                <button onclick="closeShareModal()" class="w-full px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium">ë‹«ê¸°</button>
            </div>
        </div>
    </div>

    <script>
        requireAuth();

        const feedPosts = [
            {
                id: 1,
                author: 'í™ì…€í”„',
                avatar: 'ğŸ‘¨â€ğŸ³',
                time: '2ì‹œê°„ ì „',
                type: 'recipe',
                title: 'ìƒˆë¡œìš´ ë ˆì‹œí”¼: ë§¤ì½¤í•œ ê¹€ì¹˜ì°Œê°œ',
                image: 'ğŸ”¥',
                content: 'ì§‘ì—ì„œ ë§Œë“  ë§›ìˆëŠ” ê¹€ì¹˜ì°Œê°œì…ë‹ˆë‹¤. ì •ë§ ì¶”ì²œí•©ë‹ˆë‹¤!',
                likes: 234,
                comments: 42,
                liked: false
            },
            {
                id: 2,
                author: 'ë°•ë¯¼ì§€',
                avatar: 'ğŸ‘©â€ğŸ³',
                time: '4ì‹œê°„ ì „',
                type: 'activity',
                title: 'íŒŒìŠ¤íƒ€ ì¹´ë¥´ë³´ë‚˜ë¼ ë¦¬ë·°',
                image: 'ğŸ',
                content: 'ë§ˆë¥´ì½” ì…°í”„ì˜ íŒŒìŠ¤íƒ€ê°€ ì •ë§ í›Œë¥­í–ˆìŠµë‹ˆë‹¤!',
                rating: 5,
                likes: 156,
                comments: 28,
                liked: false
            },
            {
                id: 3,
                author: 'íƒ€ë¡œ',
                avatar: 'ğŸ‘¨â€ğŸ³',
                time: '6ì‹œê°„ ì „',
                type: 'recipe',
                title: 'ì´ˆë°¥ ë¡¤ íŠœí† ë¦¬ì–¼',
                image: 'ğŸ£',
                content: 'ì´ˆê¸‰ìë„ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆëŠ” ì´ˆë°¥ ë¡¤ ë§Œë“œëŠ” ë²•ì…ë‹ˆë‹¤.',
                likes: 389,
                comments: 67,
                liked: false
            },
            {
                id: 4,
                author: 'ì¹´ë¥¼ë¡œìŠ¤',
                avatar: 'ğŸ‘¨â€ğŸ³',
                time: '8ì‹œê°„ ì „',
                type: 'activity',
                title: 'íƒ€ì½” íƒ€ì½” íƒ€ì½”!',
                image: 'ğŸŒ®',
                content: 'ì €í¬ ì‹ë‹¹ì—ì„œ ìƒˆë¡œìš´ íƒ€ì½” ë©”ë‰´ë¥¼ ì¶œì‹œí–ˆìŠµë‹ˆë‹¤.',
                likes: 278,
                comments: 51,
                liked: false
            }
        ];

        const recommendedChefs = [
            { id: 1, name: 'í™ì…€í”„', avatar: 'ğŸ‘¨â€ğŸ³', followers: 1240, followed: false },
            { id: 2, name: 'ë§ˆë¥´ì½”', avatar: 'ğŸ‘¨â€ğŸ³', followers: 890, followed: false },
            { id: 3, name: 'í”¼ì—ë¥´', avatar: 'ğŸ‘¨â€ğŸ³', followers: 2100, followed: true },
        ];

        function init() {
            renderFeed();
            renderRecommendations();
        }

        function renderFeed() {
            const feedStream = document.getElementById('feedStream');
            feedStream.innerHTML = feedPosts.map(post => `
                <div class="feed-card bg-slate-800 rounded-lg border border-slate-700 overflow-hidden">
                    <div class="p-4 border-b border-slate-700 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">${post.avatar}</span>
                            <div>
                                <p class="font-semibold text-white">${post.author}</p>
                                <p class="text-xs text-slate-400">${post.time}</p>
                            </div>
                        </div>
                        <button onclick="toggleFollow('${post.author}')" class="px-3 py-1 bg-orange-600 hover:bg-orange-700 text-white text-sm rounded-lg">ğŸ‘¥ íŒ”ë¡œìš°</button>
                    </div>

                    <div class="p-4">
                        <h4 class="font-semibold text-white mb-2">${post.title}</h4>
                        <div class="text-4xl mb-3 text-center">${post.image}</div>
                        <p class="text-slate-300 mb-3">${post.content}</p>
                        ${post.rating ? `<div class="mb-3 text-yellow-400">â­â­â­â­â­</div>` : ''}
                    </div>

                    <div class="px-4 py-2 bg-slate-900 border-t border-slate-700 flex items-center justify-around text-sm">
                        <button onclick="toggleLike(${post.id})" class="flex items-center gap-2 text-slate-400 hover:text-orange-400 transition">
                            <span id="like-${post.id}">${post.liked ? 'â¤ï¸' : 'ğŸ¤'}</span>
                            <span id="like-count-${post.id}">${post.likes}</span>
                        </button>
                        <button onclick="openCommentModal(${post.id}, '${post.title}')" class="flex items-center gap-2 text-slate-400 hover:text-blue-400 transition">
                            <span>ğŸ’¬</span>
                            <span>${post.comments}</span>
                        </button>
                        <button onclick="openShareModal()" class="flex items-center gap-2 text-slate-400 hover:text-green-400 transition">
                            <span>ğŸ“¤</span>
                            <span>ê³µìœ </span>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function renderRecommendations() {
            const recommendedChefs_el = document.getElementById('recommendedChefs');
            recommendedChefs_el.innerHTML = recommendedChefs.map(chef => `
                <div class="bg-slate-700 rounded p-3 flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <span class="text-xl">${chef.avatar}</span>
                        <div>
                            <p class="font-semibold text-white text-sm">${chef.name}</p>
                            <p class="text-xs text-slate-400">${chef.followers}ëª… íŒ”ë¡œìš°</p>
                        </div>
                    </div>
                    <button onclick="toggleFollowChef(${chef.id})" class="px-2 py-1 ${chef.followed ? 'bg-slate-600' : 'bg-orange-600'} hover:opacity-90 text-white text-xs rounded">
                        ${chef.followed ? 'íŒ”ë¡œìš°ì¤‘' : 'íŒ”ë¡œìš°'}
                    </button>
                </div>
            `).join('');
        }

        function toggleLike(postId) {
            const post = feedPosts.find(p => p.id === postId);
            if (!post) return;
            post.liked = !post.liked;
            if (post.liked) {
                post.likes += 1;
                document.getElementById(`like-${postId}`).textContent = 'â¤ï¸';
            } else {
                post.likes -= 1;
                document.getElementById(`like-${postId}`).textContent = 'ğŸ¤';
            }
            document.getElementById(`like-count-${postId}`).textContent = post.likes;
        }

        function toggleFollow(author) {
            showSuccess(`${author}ì„(ë¥¼) íŒ”ë¡œìš°í–ˆìŠµë‹ˆë‹¤.`);
        }

        function toggleFollowChef(chefId) {
            const chef = recommendedChefs.find(c => c.id === chefId);
            if (!chef) return;
            chef.followed = !chef.followed;
            renderRecommendations();
            showSuccess(chef.followed ? `${chef.name}ì„(ë¥¼) íŒ”ë¡œìš°í–ˆìŠµë‹ˆë‹¤.` : `${chef.name} íŒ”ë¡œìš°ë¥¼ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.`);
        }

        function openCommentModal(postId, recipeName) {
            document.getElementById('commentModal').classList.remove('hidden');
            document.getElementById('commentRecipeName').textContent = recipeName;
            document.getElementById('commentModal').dataset.postId = postId;
            document.getElementById('commentText').value = '';
        }

        function closeCommentModal() {
            document.getElementById('commentModal').classList.add('hidden');
        }

        function setRating(stars) {
            document.querySelectorAll('#commentModal button[onclick*="setRating"]').forEach(btn => {
                btn.classList.remove('bg-orange-600', 'hover:bg-orange-700');
                btn.classList.add('bg-slate-700', 'hover:bg-slate-600');
            });
            event.target.classList.add('bg-orange-600', 'hover:bg-orange-700');
            event.target.classList.remove('bg-slate-700', 'hover:bg-slate-600');
        }

        function addPhoto() {
            showSuccess('ì‚¬ì§„ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function submitComment() {
            const text = document.getElementById('commentText').value;
            if (!text.trim()) {
                showError('ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            showSuccess('ëŒ“ê¸€ì´ ê²Œì‹œë˜ì—ˆìŠµë‹ˆë‹¤!');
            closeCommentModal();
        }

        function openShareModal() {
            document.getElementById('shareModal').classList.remove('hidden');
        }

        function closeShareModal() {
            document.getElementById('shareModal').classList.add('hidden');
        }

        function copyShareLink() {
            navigator.clipboard.writeText('https://softfactory.com/feed/post-abc123').then(() => {
                showSuccess('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        function editProfile() {
            showSuccess('í”„ë¡œí•„ í¸ì§‘ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        function viewFollowers() {
            showSuccess('íŒ”ë¡œì›Œ ëª©ë¡ì„ í‘œì‹œí•©ë‹ˆë‹¤.');
        }

        // Close modals when clicking outside
        document.getElementById('commentModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('commentModal')) closeCommentModal();
        });
        document.getElementById('shareModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('shareModal')) closeShareModal();
        });

        document.addEventListener('DOMContentLoaded', init);
    </script>
    <script src="../mobile-optimization.js" defer></script>
</body>
</html>
