<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#111827">
<title>ë¶„ì„ ëŒ€ì‹œë³´ë“œ â€” SoftFactory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script src="https://cdn.jsdelivr.net/npm/jspdf"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="api.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        .apexcharts-canvas { margin: 0 !important; }
        .metric-card { transition: all 0.3s ease; }
        .metric-card:hover { transform: translateY(-2px); }
        .pulse-dot { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
    <link rel="stylesheet" href="../responsive-framework.css">
  </head>
<body class="bg-slate-950 text-slate-100 antialiased">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-64 bg-slate-900 border-r border-slate-800 flex flex-col shrink-0">
            <!-- Logo -->
            <div class="p-6 border-b border-slate-800">
                <div class="flex items-center gap-3">
                    <span class="text-2xl">ğŸ­</span>
                    <div>
                        <h1 class="font-bold text-white">SoftFactory</h1>
                        <p class="text-xs text-slate-400">Premium SaaS</p>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 p-6 space-y-2 overflow-y-auto">
    <button class="hamburger" aria-label="Toggle navigation menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
                <a href="dashboard.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>ğŸ“Š</span> ëŒ€ì‹œë³´ë“œ
                </a>
                <a href="analytics.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg bg-indigo-600 text-white font-medium">
                    <span>ğŸ“ˆ</span> ë¶„ì„
                </a>
                <a href="billing.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>ğŸ’³</span> ê²°ì œ ë° ì²­êµ¬
                </a>
                <a href="profile.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>ğŸ‘¤</span> í”„ë¡œí•„
                </a>
                <a href="admin.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>âš™ï¸</span> ê´€ë¦¬ì
                </a>

                <div class="my-6 border-t border-slate-800"></div>

                <!-- Services Quick Links -->
                <p class="text-xs font-semibold text-slate-400 uppercase px-4 mb-3">ì„œë¹„ìŠ¤</p>
                <a href="../sns-auto/index.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>ğŸ“±</span> SNS Auto
                </a>
                <a href="../review/index.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>â­</span> Review
                </a>
                <a href="../coocook/index.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>ğŸ³</span> CooCook
                </a>
                <a href="../ai-automation/index.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>ğŸ¤–</span> AI Automation
                </a>
                <a href="../webapp-builder/index.html" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-slate-300 hover:bg-slate-800 transition">
                    <span>ğŸ’»</span> WebApp Builder
                </a>
            </nav>

            <!-- User Info -->
            <div class="p-6 border-t border-slate-800">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-white" id="userName">Demo User</p>
                        <p class="text-xs text-slate-400" id="userEmail">demo@softfactory.com</p>
                    </div>
                    <button onclick="logout()" class="p-2 hover:bg-slate-800 rounded-lg transition" title="Logout">
                        <span>ğŸšª</span>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="h-16 bg-slate-900 border-b border-slate-800 px-6 flex items-center justify-between shrink-0">
                <div>
                    <h2 class="text-xl font-bold text-white">ë¶„ì„ ëŒ€ì‹œë³´ë“œ</h2>
                    <p class="text-xs text-slate-400">ì‚¬ìš©ì í–‰ë™, ì „í™˜ìœ¨, LTV ë¶„ì„</p>
                </div>
                <div class="flex items-center gap-2">
                    <button onclick="exportPDF()" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition text-sm flex items-center gap-2">
                        ğŸ“„ PDF
                    </button>
                    <button onclick="exportCSV()" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition text-sm flex items-center gap-2">
                        ğŸ“Š CSV
                    </button>
                    <button onclick="toggleSettings()" class="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg transition text-sm">
                        âš™ï¸ ì„¤ì •
                    </button>
                </div>
            </header>

            <!-- Content -->
            <main class="flex-1 overflow-y-auto p-6 space-y-6">
                <!-- Filters Section -->
                <div class="bg-slate-800 rounded-xl p-5 border border-slate-700">
                    <h3 class="text-sm font-semibold text-white mb-4 flex items-center gap-2">
                        <span>ğŸ”</span> í•„í„° & ë¹„êµ
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <!-- Date Range -->
                        <div>
                            <label class="text-xs font-medium text-slate-400 block mb-2">ê¸°ê°„ ì„ íƒ</label>
                            <select id="dateRange" onchange="applyFilters()" class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 text-sm">
                                <option value="7">ì§€ë‚œ 7ì¼</option>
                                <option value="30" selected>ì§€ë‚œ 30ì¼</option>
                                <option value="90">ì§€ë‚œ 90ì¼</option>
                                <option value="custom">ì»¤ìŠ¤í…€ ê¸°ê°„</option>
                            </select>
                        </div>

                        <!-- Service Selection -->
                        <div>
                            <label class="text-xs font-medium text-slate-400 block mb-2">ì„œë¹„ìŠ¤</label>
                            <select id="serviceFilter" onchange="applyFilters()" multiple class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 text-sm" size="1">
                                <option value="coocook" selected>ğŸ³ CooCook</option>
                                <option value="sns-auto" selected>ğŸ“± SNS Auto</option>
                                <option value="review" selected>â­ Review</option>
                                <option value="ai-automation" selected>ğŸ¤– AI Auto</option>
                                <option value="webapp-builder" selected>ğŸ’» WebApp</option>
                            </select>
                        </div>

                        <!-- Region Filter -->
                        <div>
                            <label class="text-xs font-medium text-slate-400 block mb-2">ì§€ì—­</label>
                            <select id="regionFilter" onchange="applyFilters()" class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 text-sm">
                                <option value="all" selected>ì „ì²´ ì§€ì—­</option>
                                <option value="korea">ëŒ€í•œë¯¼êµ­</option>
                                <option value="asia">ì•„ì‹œì•„</option>
                                <option value="global">ì „ ì„¸ê³„</option>
                            </select>
                        </div>

                        <!-- User Segment -->
                        <div>
                            <label class="text-xs font-medium text-slate-400 block mb-2">ì‚¬ìš©ì ì„¸ê·¸ë¨¼íŠ¸</label>
                            <select id="segmentFilter" onchange="applyFilters()" class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 text-sm">
                                <option value="all" selected>ì „ì²´</option>
                                <option value="new">ì‹ ê·œ ì‚¬ìš©ì</option>
                                <option value="active">í™œì„± ì‚¬ìš©ì</option>
                                <option value="vip">VIP</option>
                                <option value="dormant">íœ´ë©´ ì‚¬ìš©ì</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Insight Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Top Growth -->
                    <div class="bg-gradient-to-br from-green-900/30 to-green-900/10 rounded-xl p-5 border border-green-800 metric-card">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <p class="text-xs font-medium text-green-400 mb-1">ğŸš€ ì´ë²ˆì£¼ ì„±ì¥ 1ìœ„</p>
                                <h4 class="text-lg font-bold text-white" id="topGrowthService">SNS Auto</h4>
                            </div>
                            <span class="text-2xl font-bold text-green-400" id="topGrowthPercent">+24.5%</span>
                        </div>
                        <p class="text-xs text-slate-400">ì „ì£¼ ëŒ€ë¹„</p>
                    </div>

                    <!-- Key Metrics Change -->
                    <div class="bg-gradient-to-br from-blue-900/30 to-blue-900/10 rounded-xl p-5 border border-blue-800 metric-card">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <p class="text-xs font-medium text-blue-400 mb-1">ğŸ“Š ì£¼ìš” ë©”íŠ¸ë¦­</p>
                                <h4 class="text-lg font-bold text-white">ì „í™˜ìœ¨</h4>
                            </div>
                            <span class="text-2xl font-bold text-blue-400" id="conversionMetric">+3.2%</span>
                        </div>
                        <p class="text-xs text-slate-400">ëª©í‘œ: 4.5%</p>
                    </div>

                    <!-- Anomaly Detection -->
                    <div class="bg-gradient-to-br from-amber-900/30 to-amber-900/10 rounded-xl p-5 border border-amber-800 metric-card">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <p class="text-xs font-medium text-amber-400 mb-1">âš ï¸ ì´ìƒ íƒì§€</p>
                                <h4 class="text-lg font-bold text-white">CooCook</h4>
                            </div>
                            <span class="pulse-dot text-2xl">ğŸ”´</span>
                        </div>
                        <p class="text-xs text-amber-300">ì‚¬ìš©ëŸ‰ 30% ê¸‰ë½</p>
                    </div>

                    <!-- Recommendation -->
                    <div class="bg-gradient-to-br from-purple-900/30 to-purple-900/10 rounded-xl p-5 border border-purple-800 metric-card">
                        <div class="flex items-start justify-between mb-3">
                            <div>
                                <p class="text-xs font-medium text-purple-400 mb-1">ğŸ’¡ ì¶”ì²œ ì•¡ì…˜</p>
                                <h4 class="text-lg font-bold text-white">í”„ë¡œëª¨ì…˜</h4>
                            </div>
                            <span class="text-2xl">âœ¨</span>
                        </div>
                        <p class="text-xs text-slate-400">CooCook ì‚¬ìš©ì ì¬ì°¸ì—¬</p>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Time Series Forecast Chart -->
                    <div class="bg-slate-800 rounded-xl p-6 border border-slate-700">
                        <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                            <span>ğŸ“ˆ</span> ì‹œê³„ì—´ ì˜ˆì¸¡ (30ì¼)
                        </h3>
                        <div id="timeSeriesChart"></div>
                    </div>

                    <!-- Service Distribution 3D Pie -->
                    <div class="bg-slate-800 rounded-xl p-6 border border-slate-700">
                        <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                            <span>ğŸ¥§</span> ì„œë¹„ìŠ¤ë³„ ë¹„ì¤‘
                        </h3>
                        <div id="serviceDistributionChart"></div>
                    </div>

                    <!-- Heatmap (Activity by Hour) -->
                    <div class="bg-slate-800 rounded-xl p-6 border border-slate-700">
                        <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                            <span>ğŸ”¥</span> ì‹œê°„ëŒ€ë³„ í™œë™ (íˆíŠ¸ë§µ)
                        </h3>
                        <div id="heatmapChart"></div>
                    </div>

                    <!-- Scatter (Correlation) -->
                    <div class="bg-slate-800 rounded-xl p-6 border border-slate-700">
                        <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                            <span>âš¡</span> ìƒê´€ê´€ê³„ (CAC vs LTV)
                        </h3>
                        <div id="scatterChart"></div>
                    </div>
                </div>

                <!-- Cohort Analysis -->
                <div class="bg-slate-800 rounded-xl p-6 border border-slate-700">
                    <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                        <span>ğŸ‘¥</span> ì½”í˜¸íŠ¸ ë¶„ì„ (ì‚¬ìš©ì ì²´ë¥˜ìœ¨)
                    </h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-xs">
                            <thead>
                                <tr class="border-b border-slate-700">
                                    <th class="text-left py-3 px-4 text-slate-400 font-medium">ì½”í˜¸íŠ¸</th>
                                    <th class="text-center py-3 px-4 text-slate-400 font-medium">í¬ê¸°</th>
                                    <th class="text-center py-3 px-4 text-slate-400 font-medium">0ì£¼</th>
                                    <th class="text-center py-3 px-4 text-slate-400 font-medium">1ì£¼</th>
                                    <th class="text-center py-3 px-4 text-slate-400 font-medium">2ì£¼</th>
                                    <th class="text-center py-3 px-4 text-slate-400 font-medium">3ì£¼</th>
                                    <th class="text-center py-3 px-4 text-slate-400 font-medium">4ì£¼</th>
                                </tr>
                            </thead>
                            <tbody id="cohortTable">
                                <tr class="border-b border-slate-700/50 hover:bg-slate-700/30">
                                    <td class="py-3 px-4 text-slate-300">2026-02-01</td>
                                    <td class="text-center py-3 px-4 text-slate-300">1,245</td>
                                    <td class="text-center py-3 px-4"><span class="bg-green-600/30 text-green-300 px-2 py-1 rounded text-xs font-medium">100%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-green-600/30 text-green-300 px-2 py-1 rounded text-xs font-medium">87%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs font-medium">72%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs font-medium">68%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs font-medium">65%</span></td>
                                </tr>
                                <tr class="border-b border-slate-700/50 hover:bg-slate-700/30">
                                    <td class="py-3 px-4 text-slate-300">2026-02-08</td>
                                    <td class="text-center py-3 px-4 text-slate-300">1,892</td>
                                    <td class="text-center py-3 px-4"><span class="bg-green-600/30 text-green-300 px-2 py-1 rounded text-xs font-medium">100%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-green-600/30 text-green-300 px-2 py-1 rounded text-xs font-medium">91%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-green-600/30 text-green-300 px-2 py-1 rounded text-xs font-medium">79%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs font-medium">74%</span></td>
                                    <td class="text-center py-3 px-4">-</td>
                                </tr>
                                <tr class="border-b border-slate-700/50 hover:bg-slate-700/30">
                                    <td class="py-3 px-4 text-slate-300">2026-02-15</td>
                                    <td class="text-center py-3 px-4 text-slate-300">2,134</td>
                                    <td class="text-center py-3 px-4"><span class="bg-green-600/30 text-green-300 px-2 py-1 rounded text-xs font-medium">100%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-green-600/30 text-green-300 px-2 py-1 rounded text-xs font-medium">89%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs font-medium">76%</span></td>
                                    <td class="text-center py-3 px-4">-</td>
                                    <td class="text-center py-3 px-4">-</td>
                                </tr>
                                <tr class="hover:bg-slate-700/30">
                                    <td class="py-3 px-4 text-slate-300">2026-02-22</td>
                                    <td class="text-center py-3 px-4 text-slate-300">2,567</td>
                                    <td class="text-center py-3 px-4"><span class="bg-green-600/30 text-green-300 px-2 py-1 rounded text-xs font-medium">100%</span></td>
                                    <td class="text-center py-3 px-4"><span class="bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs font-medium">85%</span></td>
                                    <td class="text-center py-3 px-4">-</td>
                                    <td class="text-center py-3 px-4">-</td>
                                    <td class="text-center py-3 px-4">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Conversion Funnel -->
                <div class="bg-slate-800 rounded-xl p-6 border border-slate-700">
                    <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                        <span>ğŸ”„</span> ì „í™˜ìœ¨ í€ë„¬
                    </h3>
                    <div class="space-y-3" id="funnelChart"></div>
                </div>

                <!-- LTV vs CAC Comparison -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="bg-gradient-to-br from-indigo-900/30 to-indigo-900/10 rounded-xl p-6 border border-indigo-800 metric-card">
                        <p class="text-xs font-medium text-indigo-400 mb-2">ğŸ’° í‰ê·  LTV</p>
                        <h4 class="text-3xl font-bold text-white mb-2" id="ltv">â‚©2,450,000</h4>
                        <p class="text-xs text-slate-400">ê³ ê° ìƒëª…ì£¼ê¸°ê°€ì¹˜</p>
                        <div class="mt-4 text-xs text-indigo-300 flex items-center gap-1">
                            <span>ğŸ“ˆ</span> ì „ì›” ëŒ€ë¹„ +12.3%
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-pink-900/30 to-pink-900/10 rounded-xl p-6 border border-pink-800 metric-card">
                        <p class="text-xs font-medium text-pink-400 mb-2">ğŸ’¸ í‰ê·  CAC</p>
                        <h4 class="text-3xl font-bold text-white mb-2" id="cac">â‚©285,000</h4>
                        <p class="text-xs text-slate-400">ê³ ê° íšë“ ë¹„ìš©</p>
                        <div class="mt-4 text-xs text-pink-300 flex items-center gap-1">
                            <span>ğŸ“‰</span> ì „ì›” ëŒ€ë¹„ -5.6%
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-purple-900/30 to-purple-900/10 rounded-xl p-6 border border-purple-800 metric-card">
                        <p class="text-xs font-medium text-purple-400 mb-2">ğŸ¯ LTV/CAC ë¹„ìœ¨</p>
                        <h4 class="text-3xl font-bold text-white mb-2" id="ltvcacRatio">8.6x</h4>
                        <p class="text-xs text-slate-400">ëª©í‘œ: 3:1 ì´ìƒ</p>
                        <div class="mt-4 text-xs text-purple-300 flex items-center gap-1">
                            <span>âœ…</span> ê±´ê°•í•œ ìƒíƒœ
                        </div>
                    </div>
                </div>

                <!-- Schedule Report Settings (Hidden by default) -->
                <div id="scheduleSettings" class="hidden bg-slate-800 rounded-xl p-6 border border-slate-700">
                    <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                        <span>â°</span> ìŠ¤ì¼€ì¤„ ë¦¬í¬íŠ¸ ì„¤ì •
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label class="text-xs font-medium text-slate-400 block mb-2">ë¦¬í¬íŠ¸ ë¹ˆë„</label>
                            <select class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 text-sm">
                                <option>ì£¼ 1íšŒ (ì›”ìš”ì¼)</option>
                                <option>ì›” 1íšŒ (1ì¼)</option>
                                <option>ë¶„ê¸° 1íšŒ</option>
                                <option>ë¹„í™œì„±</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-xs font-medium text-slate-400 block mb-2">ìˆ˜ì‹  ì‹œê°„</label>
                            <input type="time" value="09:00" class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 text-sm">
                        </div>
                        <div>
                            <label class="text-xs font-medium text-slate-400 block mb-2">ìˆ˜ì‹  ë©”ì¼</label>
                            <input type="email" placeholder="your@email.com" id="reportEmail" class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 text-sm">
                        </div>
                    </div>
                    <button onclick="saveScheduleSettings()" class="mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition text-sm">
                        ğŸ’¾ ì €ì¥
                    </button>
                </div>
            </main>
        </div>
    </div>

    <script>
        requireAuth();

        // Chart instances
        let timeSeriesChart, serviceDistChart, heatmapChart, scatterChart;

        async function init() {
            try {
                const user = getUser();
                if (user) {
                    document.getElementById('userName').textContent = user.name || 'Demo User';
                    document.getElementById('userEmail').textContent = user.email;
                }

                // Load analytics data
                await loadAnalyticsData();
            } catch (error) {
                console.error('Error loading analytics:', error);
                showError('ë¶„ì„ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
            }
        }

        async function loadAnalyticsData() {
            try {
                // Mock data for analytics
                renderTimeSeriesChart();
                renderServiceDistributionChart();
                renderHeatmapChart();
                renderScatterChart();
                renderFunnelChart();
            } catch (error) {
                console.error('Error loading analytics data:', error);
            }
        }

        function renderTimeSeriesChart() {
            const options = {
                chart: {
                    type: 'area',
                    height: 300,
                    toolbar: { show: true },
                    background: 'transparent',
                    fontFamily: 'Inter, sans-serif'
                },
                colors: ['#4f46e5', '#ec4899'],
                series: [
                    {
                        name: 'ì‹¤ì œ ë°ì´í„°',
                        data: [2800, 3200, 3500, 3200, 3800, 4100, 4500, 4300, 4800, 5200, 5100, 5500, 5800, 6200]
                    },
                    {
                        name: 'ì˜ˆì¸¡ ë°ì´í„°',
                        data: [null, null, null, null, null, null, null, null, null, null, null, 5900, 6300, 6700]
                    }
                ],
                xaxis: {
                    categories: ['Feb 1', 'Feb 2', 'Feb 3', 'Feb 4', 'Feb 5', 'Feb 6', 'Feb 7', 'Feb 8', 'Feb 9', 'Feb 10', 'Feb 11', 'Feb 12', 'Feb 13', 'Feb 14'],
                    labels: { style: { colors: '#94a3b8', fontSize: '12px' } }
                },
                yaxis: {
                    labels: {
                        style: { colors: '#94a3b8' },
                        formatter: (value) => 'â‚©' + value.toLocaleString()
                    }
                },
                grid: { borderColor: '#334155' },
                tooltip: {
                    theme: 'dark',
                    style: { fontSize: '12px' }
                },
                stroke: { curve: 'smooth', width: 2 }
            };

            if (timeSeriesChart) timeSeriesChart.destroy();
            timeSeriesChart = new ApexCharts(document.getElementById('timeSeriesChart'), options);
            timeSeriesChart.render();
        }

        function renderServiceDistributionChart() {
            const options = {
                chart: {
                    type: 'pie',
                    height: 300,
                    toolbar: { show: false },
                    fontFamily: 'Inter, sans-serif'
                },
                series: [28, 22, 35, 10, 5],
                labels: ['SNS Auto', 'Review', 'CooCook', 'WebApp', 'AI Auto'],
                colors: ['#ec4899', '#f59e0b', '#f97316', '#06b6d4', '#a855f7'],
                legend: {
                    position: 'bottom',
                    labels: { colors: '#94a3b8' }
                },
                tooltip: { theme: 'dark' },
                plotOptions: {
                    pie: {
                        donut: {
                            size: '65%'
                        }
                    }
                }
            };

            if (serviceDistChart) serviceDistChart.destroy();
            serviceDistChart = new ApexCharts(document.getElementById('serviceDistributionChart'), options);
            serviceDistChart.render();
        }

        function renderHeatmapChart() {
            const options = {
                chart: {
                    type: 'heatmap',
                    height: 320,
                    toolbar: { show: false },
                    fontFamily: 'Inter, sans-serif'
                },
                series: [
                    { name: 'ì›”', data: generateHeatmapData(0) },
                    { name: 'í™”', data: generateHeatmapData(1) },
                    { name: 'ìˆ˜', data: generateHeatmapData(2) },
                    { name: 'ëª©', data: generateHeatmapData(3) },
                    { name: 'ê¸ˆ', data: generateHeatmapData(4) },
                    { name: 'í† ', data: generateHeatmapData(5) },
                    { name: 'ì¼', data: generateHeatmapData(6) }
                ],
                xaxis: {
                    categories: Array.from({length: 24}, (_, i) => i + 'ì‹œ'),
                    labels: { style: { colors: '#94a3b8', fontSize: '11px' } }
                },
                yaxis: { labels: { style: { colors: '#94a3b8' } } },
                colors: ['#334155', '#1e40af', '#3b82f6', '#60a5fa', '#93c5fd'],
                tooltip: { theme: 'dark' }
            };

            if (heatmapChart) heatmapChart.destroy();
            heatmapChart = new ApexCharts(document.getElementById('heatmapChart'), options);
            heatmapChart.render();
        }

        function generateHeatmapData(day) {
            return Array.from({length: 24}, (_, i) => ({
                x: i + 'ì‹œ',
                y: Math.floor(Math.random() * 100) + 20
            }));
        }

        function renderScatterChart() {
            const options = {
                chart: {
                    type: 'scatter',
                    height: 320,
                    toolbar: { show: true },
                    fontFamily: 'Inter, sans-serif'
                },
                series: [
                    {
                        name: 'ê³ ê° êµ°ì§‘',
                        data: [
                            {x: 150000, y: 1800000}, {x: 180000, y: 2200000}, {x: 200000, y: 2500000},
                            {x: 220000, y: 2800000}, {x: 250000, y: 3100000}, {x: 280000, y: 3400000},
                            {x: 300000, y: 3500000}, {x: 320000, y: 3800000}, {x: 350000, y: 4200000},
                            {x: 380000, y: 4500000}, {x: 400000, y: 4800000}
                        ]
                    }
                ],
                xaxis: {
                    type: 'numeric',
                    title: { text: 'CAC (â‚©)', style: { color: '#94a3b8' } },
                    labels: { style: { colors: '#94a3b8' }, formatter: (v) => 'â‚©' + v.toLocaleString() }
                },
                yaxis: {
                    title: { text: 'LTV (â‚©)', style: { color: '#94a3b8' } },
                    labels: { style: { colors: '#94a3b8' }, formatter: (v) => 'â‚©' + v.toLocaleString() }
                },
                colors: ['#4f46e5'],
                tooltip: {
                    theme: 'dark',
                    shared: false,
                    custom: ({ series, seriesIndex, dataPointIndex, w }) => {
                        const x = w.config.series[seriesIndex].data[dataPointIndex].x;
                        const y = w.config.series[seriesIndex].data[dataPointIndex].y;
                        return `<div class="px-3 py-2 bg-slate-900 border border-slate-700 rounded"><span class="text-xs text-slate-300">CAC: â‚©${x.toLocaleString()}<br/>LTV: â‚©${y.toLocaleString()}</span></div>`;
                    }
                },
                grid: { borderColor: '#334155' }
            };

            if (scatterChart) scatterChart.destroy();
            scatterChart = new ApexCharts(document.getElementById('scatterChart'), options);
            scatterChart.render();
        }

        function renderFunnelChart() {
            const funnel = [
                { stage: 'Website Visit', count: 12000, pct: 100 },
                { stage: 'Sign Up', count: 8400, pct: 70 },
                { stage: 'Service Activation', count: 5100, pct: 60 },
                { stage: 'Payment', count: 3200, pct: 62 },
                { stage: 'Active User (DAU)', count: 2560, pct: 80 }
            ];

            const container = document.getElementById('funnelChart');
            container.innerHTML = funnel.map((item, idx) => `
                <div class="space-y-2">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-slate-300">${idx + 1}. ${item.stage}</span>
                        <span class="text-sm text-slate-400">${item.count.toLocaleString()} (${item.pct}%)</span>
                    </div>
                    <div class="w-full h-6 bg-slate-700 rounded-lg overflow-hidden">
                        <div class="h-full bg-gradient-to-r from-indigo-500 to-indigo-400 transition" style="width: ${item.pct}%;"></div>
                    </div>
                </div>
            `).join('');
        }

        function applyFilters() {
            const dateRange = document.getElementById('dateRange').value;
            const services = Array.from(document.getElementById('serviceFilter').selectedOptions).map(opt => opt.value);
            const region = document.getElementById('regionFilter').value;
            const segment = document.getElementById('segmentFilter').value;

            console.log('Filters applied:', { dateRange, services, region, segment });

            // Reload charts with new filters
            loadAnalyticsData();
        }

        function toggleSettings() {
            const settings = document.getElementById('scheduleSettings');
            settings.classList.toggle('hidden');
        }

        function saveScheduleSettings() {
            const email = document.getElementById('reportEmail').value;
            if (email) {
                showSuccess('ë¦¬í¬íŠ¸ ì¼ì •ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤: ' + email);
            }
        }

        async function exportPDF() {
            try {
                const element = document.querySelector('main');
                const canvas = await html2canvas(element, {
                    backgroundColor: '#0f172a',
                    scale: 2
                });
                const img = canvas.toDataURL('image/png');
                const pdf = new jsPDF({
                    orientation: 'landscape',
                    unit: 'mm',
                    format: 'a4'
                });

                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                const imgWidth = pdfWidth - 20;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;

                pdf.addImage(img, 'PNG', 10, 10, imgWidth, imgHeight);
                pdf.save(`analytics-report-${new Date().toISOString().split('T')[0]}.pdf`);
                showSuccess('PDF ë¦¬í¬íŠ¸ê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤');
            } catch (error) {
                showError('PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
            }
        }

        async function exportCSV() {
            try {
                const data = [
                    ['ë¶„ì„ ë¦¬í¬íŠ¸', new Date().toLocaleString()],
                    [],
                    ['ì„œë¹„ìŠ¤', 'ì‚¬ìš©ì', 'ìˆ˜ìµ', 'ì „í™˜ìœ¨', 'LTV'],
                    ['SNS Auto', '3,200', 'â‚©156,800', '4.2%', 'â‚©2,450,000'],
                    ['Review', '2,100', 'â‚©209,000', '3.8%', 'â‚©2,100,000'],
                    ['CooCook', '1,800', 'â‚©70,200', '2.5%', 'â‚©1,800,000'],
                    ['WebApp Builder', '950', 'â‚©5,605,000', '5.1%', 'â‚©3,200,000'],
                    ['AI Automation', '850', 'â‚©75,650', '3.2%', 'â‚©2,300,000']
                ];

                const csv = data.map(row => row.join(',')).join('\n');
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `analytics-export-${new Date().toISOString().split('T')[0]}.csv`;
                a.click();

                showSuccess('CSV íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤');
            } catch (error) {
                showError('CSV ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
            }
        }

        function showSuccess(message) {
            alert('âœ… ' + message);
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
    <script src="../mobile-optimization.js" defer></script>
</body>
</html>
