# 📋 10개 핵심 규칙

> **마지막 업데이트:** 2026-02-23 | **권한:** System Architecture | **상태:** ✅ ACTIVE

---

## 🎯 개요

**모든 에이전트가 지켜야 할 10개 규칙**

이 규칙들은:
- ✅ 선택 사항이 아니다 (필수)
- ✅ 모든 프로젝트에 적용된다
- ✅ 예외는 01-Dispatcher 승인만 가능
- ✅ 위반 시 프로젝트 지연 초래

---

## R1️⃣ 순차적 사고 (Sequential Thinking)

**규칙:** 손을 내밀기 전에 **순차적으로** 생각하세요.

**의미:**
- 결정하기 전에 체계적으로 분석
- 직관만으로는 안 됨
- "생각 > 검증 > 결정" 순서

**적용:**
- 모든 에이전트 (예외 없음)
- 모든 프로젝트
- 모든 결정 위임 시

**예시 ✅**
```
05-Backend: "FastAPI를 쓸까요?"
→ 요구사항, 성능, 팀 역량, 학습곡선 분석
→ 라우팅, ORM, 테스트 프레임워크 비교
→ 이유와 함께 04-Architect에 제시
→ "FastAPI가 맞습니다 (이유: A, B, C)"
```

**예시 ✗**
```
05-Backend: "Flask 써요."
→ 이유 없이 결정
→ VIOLATION: R1 위반
```

**SLA:** 모든 결정 전에 최소 30분 분석

---

## R2️⃣ 갈등 에스컬레이션 (Conflict Escalation)

**규칙:** 갈등이 생기면 **즉시 01-Dispatcher에 보고**하세요.

**의미:**
- 갈등 = 사소한 문제 아님
- 혼자 해결하려고 하면 안 됨
- Dispatcher가 최종 조율

**적용:**
- 의견 충돌 발생 시 즉시
- 모호한 결정 시
- 우선순위 불분명 시

**예시 ✅**
```
04-Architect vs 05-Backend: "SQL vs NoSQL?"
→ 각자 분석 제시
→ 합의 실패
→ 즉시 01-Dispatcher 호출
→ Dispatcher: "이 프로젝트는 SQL (이유: ACID)"
→ ADR로 기록
```

**예시 ✗**
```
04-Architect vs 05-Backend: "SQL vs NoSQL?"
→ 계속 싸움
→ 결정 연기
→ VIOLATION: R2 위반 (SLA < 2h)
```

**SLA:** 갈등 발생 후 2시간 내 01-Dispatcher에 보고

---

## R3️⃣ 협의 프로토콜 (Consultation Protocol)

**규칙:** 불확실성 > 70%이면 **ConsultationBus를 사용**하세요.

**의미:**
- 내가 확신 못하면 물어봐야 함
- 혼자 결정하면 위험
- 전문가 의견 필수

**적용:**
- 불확실성 평가: 70% 이상
- 새로운 기술 사용
- 크로스 팀 영향

**예시 ✅**
```
06-Frontend: "WCAG 2.1 준수 방법?"
→ 자신 없음 (불확실 85%)
→ ConsultationBus 사용
→ 해당 전문가: 06-Frontend 자신이지만,
   만약 다른 팀이라면 협의 요청
```

**예시 ✗**
```
07-QA: "이 버그 심각할까?"
→ 확신 없음 (불확실 80%)
→ 아무도 안 물어봄
→ 사소한 것처럼 처리
→ VIOLATION: R3 위반
```

**SLA:** ConsultationBus 시작 후 4시간 내 답변

---

## R4️⃣ 템플릿 준수 (Template Compliance)

**규칙:** 모든 **공식 문서는 표준 템플릿**만 사용하세요.

**의미:**
- 자유로운 형식 금지
- 템플릿 기반만 허용
- 일관된 품질 보장

**적용:**
- 모든 공식 문서 (docs/standards/ 적용)
- PRD, ADR, RFC, Test Plan, Bug Report, Security Report, Runbook

**예시 ✅**
```
02-PM: "새 기능 제안"
→ docs/standards/PRD_TEMPLATE.md 사용
→ "목표", "유스케이스", "주요 지표" 섹션 채우기
→ 검토 후 배포
```

**예시 ✗**
```
02-PM: "새 기능 제안" (Word 문서)
→ 자유로운 형식
→ VIOLATION: R4 위반
```

**SLA:** 공식 문서 작성 시 항상 템플릿 사용

**참고:** `docs/standards/` 폴더에서 템플릿 찾기

---

## R5️⃣ 비밀정보 관리 (Secret Management)

**규칙:** **절대로 코드에 비밀정보 입력 금지**. `.env` 파일만 사용.

**의미:**
- 암호, API 키, DB 비밀번호는 절대금지
- 환경변수로만 관리
- .env는 git ignore

**적용:**
- 모든 코드 (Python, JavaScript, HTML 등)
- 모든 저장소 (GitHub, GitLab 등)
- 모든 환경 (dev, staging, prod)

**예시 ✅**
```
# Python 코드
import os
db_password = os.getenv('DB_PASSWORD')  # ✅ OK

# .env 파일
DB_PASSWORD=abc123xyz  # ✅ OK (commit 금지)
```

**예시 ✗**
```
# Python 코드
db_password = "abc123xyz"  # ✗ VIOLATION: R5 위반

# GitHub에 커밋
SECRET_KEY = "secret123"  # ✗ VIOLATION: R5 위반
```

**SLA:** 코드 리뷰 시 즉시 발견 & 제거

**참고:** `.env` 템플릿은 `.env.example`로 공유 (값 없이)

---

## R6️⃣ 지식 공유 (Knowledge Sharing)

**규칙:** **주간 지식 공유**를 해야 합니다.

**의미:**
- 혼자만 아는 것 금지
- 팀 전체가 배워야 함
- 크로스 훈련

**적용:**
- 매주 금요일 (또는 정기 일정)
- 새로운 기술, 발견한 문제, 해결책 공유
- 문서화하고 팀에 공유

**예시 ✅**
```
05-Backend: "SQLAlchemy에서 성능 최적화하는 방법"
→ 팀에 공유 (Slack, 회의, 문서)
→ 다른 팀원들도 배움
→ 문서화해서 기록
```

**예시 ✗**
```
05-Backend: "이 버그 해결했어!"
→ 혼자만 알고 있음
→ 다시 같은 버그 발생
→ VIOLATION: R6 위반
```

**SLA:** 주간 지식 공유 의무

**도구:** Slack, Notion, Confluence, Wiki

---

## R7️⃣ RACI 명확성 (RACI Clarity)

**규칙:** **모든 작업은 명확한 책임자가 있어야 합니다** (RACI).

**RACI 정의:**
- **R** = Responsible (실행자)
- **A** = Accountable (책임자, 최종 책임)
- **C** = Consulted (협의)
- **I** = Informed (보고)

**적용:**
- 모든 프로젝트
- 모든 작업
- 모든 결정

**예시 ✅**
```
M-002 CooCook 백엔드 API:
- R = 05-Backend (구현)
- A = 04-Architect (설계 책임)
- C = 06-Frontend (API 사용), 07-QA (테스트)
- I = 01-Dispatcher, 02-PM

→ 명확함!
```

**예시 ✗**
```
"테스트 자동화할까?"
→ 누가 책임자? 불명확
→ VIOLATION: R7 위반
```

**SLA:** 모든 작업 시작 전 RACI 정의

**참고:** `docs/RACI_MATRIX.md` 참조

---

## R8️⃣ 스킬 우선 매칭 (Skill-First Matching)

**규칙:** **작업은 최고 스킬을 가진 사람에게 할당**하세요.

**의미:**
- 경험 많은 사람 우선
- 교육 목적은 2순위
- 최고 성과 추구

**적용:**
- 모든 작업 할당
- 모든 팀 배치
- 모든 교육

**예시 ✅**
```
"OAuth 2.0 구현할 사람?"
→ 05-Backend에는 3명 있음
→ 최고 경험자에게 할당
→ 다른 사람들은 옆에서 배움
→ 코드 리뷰로 학습
```

**예시 ✗**
```
"OAuth 2.0 구현할 사람?"
→ 경험 없는 신입에게 할당
→ 교육 목적이라고 함
→ 개발 지연
→ VIOLATION: R8 위반
```

**SLA:** 작업 할당 시 3명 내 최고 경험자 선택

**참고:** `docs/TEAM.md` → 각 에이전트의 "핵심 스킬" 확인

---

## R9️⃣ 코드 품질 게이트 (Code Quality Gates)

**규칙:** **모든 코드는 80% 테스트 커버리지 + 0C/0H 보안**을 통과해야 합니다.

**의미:**
- **80% 커버리지** = 단위 + 통합 + E2E 테스트
- **0C** = 0 Critical 버그
- **0H** = 0 High severity 보안 취약점

**적용:**
- 모든 코드 커밋 (main 브랜치)
- 모든 배포 전 (staging/prod)
- 모든 릴리스

**예시 ✅**
```
05-Backend: "새 API 엔드포인트"
→ 테스트 작성: 85% 커버리지
→ 보안 리뷰: 0C/0H
→ CI/CD 통과
→ Merge 승인

✅ R9 준수
```

**예시 ✗**
```
05-Backend: "새 API 엔드포인트"
→ 테스트: 40% 커버리지
→ 보안: 2 Critical issues
→ Main에 merge
→ VIOLATION: R9 위반
```

**SLA:** CI/CD에서 자동 차단

**도구:**
- 테스트: pytest (Python), Jest (JS)
- 보안: SAST (정적분석), DAST (동적분석)
- 커버리지: codecov, coverage.py

---

## R🔟 회고 (Retrospective)

**규칙:** **완료된 모든 미션은 회고**를 해야 합니다.

**의미:**
- 무엇이 잘 되었나?
- 무엇을 개선할까?
- 다음번에 뭘 할까?

**적용:**
- 모든 M-0XX 프로젝트
- 모든 거대한 기능
- 모든 위기 상황

**예시 ✅**
```
M-003 SoftFactory 완료
→ 1시간 회고 회의
→ "3시간 스프린트는 긍정적"
→ "데코레이터 실수 다음엔 자동 검증"
→ 10-Reporter가 Slack에 공유
→ 다음 프로젝트에 적용
```

**예시 ✗**
```
M-002 CooCook 완료
→ 회고 없음
→ 다시 같은 실수 반복
→ VIOLATION: R10 위반
```

**SLA:** 프로젝트 완료 후 3일 내 회고

**진행:** 10-Reporter 주관, 모든 팀원 참여

---

## 📊 규칙 요약표

| 규칙 | 주제 | 대상 | SLA | 위반 시 |
|------|------|------|-----|--------|
| **R1** | 순차적 사고 | 모든 에이전트 | 결정 전 30분 | 설계 재검토 |
| **R2** | 갈등 에스컬레이션 | 갈등 발생 시 | < 2시간 | Dispatcher 강제 개입 |
| **R3** | 협의 프로토콜 | 불확실 > 70% | < 4시간 | 재검토 의무 |
| **R4** | 템플릿 준수 | 공식 문서 | 작성 시 | Merge 차단 |
| **R5** | 비밀정보 관리 | 모든 코드 | 커밋 시 | Force delete + 회고 |
| **R6** | 지식 공유 | 모든 팀원 | 주간 | 역량 부족 우려 |
| **R7** | RACI 명확성 | 모든 작업 | 시작 전 | 작업 보류 |
| **R8** | 스킬 우선 매칭 | 작업 할당 | 할당 시 | 재할당 |
| **R9** | 코드 품질 게이트 | 모든 코드 | Merge 전 | CI/CD 차단 |
| **R10** | 회고 | 완료된 미션 | 완료 후 3d | 교훈 손실 |

---

## ✅ 규칙 체크리스트

**매주 확인:**

- [ ] R1: 내 결정을 순차적으로 생각했나?
- [ ] R2: 갈등이 있으면 Dispatcher에 보고했나?
- [ ] R3: 불확실한 것을 협의했나?
- [ ] R4: 공식 문서는 템플릿으로 작성했나?
- [ ] R5: 코드에 비밀정보를 넣지는 않았나?
- [ ] R6: 이번 주 지식을 공유했나?
- [ ] R7: 내 작업의 RACI가 명확한가?
- [ ] R8: 최고 스킬 사람이 이 일을 하나?
- [ ] R9: 테스트와 보안을 통과했나?
- [ ] R10: 완료한 프로젝트의 회고를 했나?

---

## 🎯 규칙 적용 예시

### 시나리오: M-002 CooCook 개발

**2026-02-24 개발 시작**

1. **R1 적용:** 05-Backend가 FastAPI 선택
   → 3시간 분석 후 이유와 함께 제시

2. **R2 적용:** 05 vs 06 "REST vs GraphQL" 갈등
   → 즉시 01-Dispatcher 호출
   → Dispatcher: "REST (GraphQL은 추후)"

3. **R3 적용:** 04-Architect가 GDPR 준수 불확실
   → ConsultationBus로 08-Security와 협의

4. **R4 적용:** 02-PM이 PRD 작성
   → docs/standards/PRD_TEMPLATE.md 사용

5. **R5 적용:** DB 암호는 .env에만
   → 코드는 `os.getenv('DB_PASSWORD')`

6. **R6 적용:** 매주 금요일 지식 공유
   → "FastAPI에서의 ORM 최적화"

7. **R7 적용:** 모든 작업에 RACI 지정
   → API 설계: A=04, R=05, C=06, I=07

8. **R8 적용:** 가장 경험많은 백엔드 개발자가 코어 API
   → 신입은 helper 기능

9. **R9 적용:** 85% 커버리지, 0C/0H 보안
   → CI/CD 자동 검증

10. **R10 적용:** 2026-04-15 완료 후
    → 3일 내 회고 회의

---

## 🚨 규칙 위반 시 처리

| 위반 심각도 | 처리 | 책임자 |
|-----------|------|--------|
| **경고** (R6 등) | 재교육, 다음 회의 | 팀 리드 |
| **차단** (R4, R9 등) | CI/CD 자동 차단 | 시스템 |
| **에스컬레이션** (R2, R5 등) | 01-Dispatcher 개입 | Dispatcher |
| **회고 의무** (큰 위반) | 팀 전체 회고 | 10-Reporter |

---

**이 10개 규칙은 선택이 아니라 필수입니다.**

**마지막 업데이트:** 2026-02-23
**다음 검토:** 2026-03-01 (M-002 개발 진행 중)
